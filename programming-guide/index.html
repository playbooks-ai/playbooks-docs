
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Build AI Agents with Natural Language Programming">
      
      
      
        <link rel="canonical" href="https://github.com/playbooks-ai/playbooks/programming-guide/">
      
      
        <link rel="prev" href="../getting-started/migrating/">
      
      
        <link rel="next" href="artifacts/">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Playbooks Programming Guide - Playbooks AI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-KSV70W8EXP"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-KSV70W8EXP",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-KSV70W8EXP",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="slate" data-md-color-accent="slate">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#playbooks-programming-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Playbooks AI" class="md-header__button md-logo" aria-label="Playbooks AI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Playbooks AI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Playbooks Programming Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="slate" data-md-color-accent="slate"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/playbooks-ai/playbooks" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    playbooks
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Playbooks AI" class="md-nav__button md-logo" aria-label="Playbooks AI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41z"/></svg>

    </a>
    Playbooks AI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/playbooks-ai/playbooks" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    playbooks
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../getting-started/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/ai-assistants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Coding Assistants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/migrating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating from Other Agent Frameworks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Programming Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Programming Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="artifacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Artifacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="python-only-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python-Only Agents
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supported Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/playbooks-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Playbooks AI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/playbooks-language/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Playbooks Language
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/playbooks-assembly-language/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Playbooks Assembly Language
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/playbooks-traditional-comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Playbooks vs Traditional Frameworks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/mcp-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MCP based Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/exported-and-public-playbooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exported and Public Playbooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/playbook-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Playbook Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/builtin-playbooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Built-in Playbooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/triggers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Triggers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/context-engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Engineering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/description-placeholders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Description Placeholders
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#whats-covered" class="md-nav__link">
    <span class="md-ellipsis">
      What's Covered
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Core Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#philosophy-software-30" class="md-nav__link">
    <span class="md-ellipsis">
      Philosophy: Software 3.0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-abstractions" class="md-nav__link">
    <span class="md-ellipsis">
      Key Abstractions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#language-syntax-and-formatting" class="md-nav__link">
    <span class="md-ellipsis">
      Language Syntax and Formatting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Language Syntax and Formatting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      File Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatting-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Formatting Rules
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-five-playbook-types" class="md-nav__link">
    <span class="md-ellipsis">
      The Five Playbook Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Five Playbook Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decision-framework" class="md-nav__link">
    <span class="md-ellipsis">
      Decision Framework
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-markdown-playbooks-structured-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      1. Markdown Playbooks - Structured Workflows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-react-playbooks-dynamic-reasoning" class="md-nav__link">
    <span class="md-ellipsis">
      2. ReAct Playbooks - Dynamic Reasoning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-raw-prompt-playbooks-full-control" class="md-nav__link">
    <span class="md-ellipsis">
      3. Raw Prompt Playbooks - Full Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-python-playbooks-hard-logic" class="md-nav__link">
    <span class="md-ellipsis">
      4. Python Playbooks - Hard Logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-extract-python-playbooks-to-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      When to Extract Python Playbooks to MCP Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-external-playbooks-remote-tools" class="md-nav__link">
    <span class="md-ellipsis">
      5. External Playbooks - Remote Tools
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decomposing-tasks-into-playbooks" class="md-nav__link">
    <span class="md-ellipsis">
      Decomposing Tasks into Playbooks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decomposing Tasks into Playbooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decomposition-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Decomposition Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#granularity-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Granularity Guidelines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-create-separate-playbooks" class="md-nav__link">
    <span class="md-ellipsis">
      When to Create Separate Playbooks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#natural-language-vs-explicit-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Natural Language vs Explicit Syntax
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Natural Language vs Explicit Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-spectrum-of-explicitness" class="md-nav__link">
    <span class="md-ellipsis">
      The Spectrum of Explicitness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-assignment" class="md-nav__link">
    <span class="md-ellipsis">
      Variable Assignment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-each-style" class="md-nav__link">
    <span class="md-ellipsis">
      When to Use Each Style
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-call-syntax-options" class="md-nav__link">
    <span class="md-ellipsis">
      Function Call Syntax Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-agent-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Agent Programs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Agent Programs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-multiple-agents" class="md-nav__link">
    <span class="md-ellipsis">
      When to Use Multiple Agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-multiple-agents" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Multiple Agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent-communication-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Agent Communication Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Agent Communication Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-direct-public-playbook-calls" class="md-nav__link">
    <span class="md-ellipsis">
      1. Direct Public Playbook Calls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-natural-language-messaging" class="md-nav__link">
    <span class="md-ellipsis">
      2. Natural Language Messaging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-meetings-multi-party-coordination" class="md-nav__link">
    <span class="md-ellipsis">
      3. Meetings - Multi-Party Coordination
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-agent-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Agent Best Practices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#triggers-event-driven-programming" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers: Event-Driven Programming
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Triggers: Event-Driven Programming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-use-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      Why Use Triggers?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      When to Use Triggers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-validation-pattern-before-after" class="md-nav__link">
    <span class="md-ellipsis">
      The Validation Pattern: Before &amp; After
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-types" class="md-nav__link">
    <span class="md-ellipsis">
      Trigger Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-trigger-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Trigger Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Trigger Best Practices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description-placeholders" class="md-nav__link">
    <span class="md-ellipsis">
      Description Placeholders
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Description Placeholders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-you-can-use" class="md-nav__link">
    <span class="md-ellipsis">
      What You Can Use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#artifacts" class="md-nav__link">
    <span class="md-ellipsis">
      Artifacts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Artifacts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#artifacts-efficient-long-content-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Artifacts - Efficient Long Content Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-patterns-and-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Common Patterns and Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Patterns and Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-python-markdown-composition" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern: Python ↔ Markdown Composition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-batch-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern: Batch Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern: Error Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-collecting-inputs-from-user" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern: Collecting Inputs from User
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-mock-backend-interactions-with-python-playbooks" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern: Mock Backend Interactions with Python Playbooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cheat-sheet" class="md-nav__link">
    <span class="md-ellipsis">
      Cheat Sheet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programming-principles-extremely-important" class="md-nav__link">
    <span class="md-ellipsis">
      Programming Principles (EXTREMELY IMPORTANT!)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="playbooks-programming-guide">Playbooks Programming Guide<a class="headerlink" href="#playbooks-programming-guide" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Software 3.0 programming, where natural language is code and LLMs are CPUs.</strong></p>
</blockquote>
<p>This is the comprehensive guide for writing Playbooks programs. Whether you're building your first agent or working on complex multi-agent systems, you'll learn to think at a higher behavioral abstraction level and leverage powerful framework features.</p>
<h2 id="whats-covered">What's Covered<a class="headerlink" href="#whats-covered" title="Permanent link">&para;</a></h2>
<ul>
<li>Think at the right abstraction level: specify agent behavior, not implementation mechanics</li>
<li>Mix natural language and Python seamlessly on the same call stack</li>
<li>Use powerful abstractions like multi-agent meetings, triggers, and dynamic plans</li>
<li>Handle edge cases naturally without explicit code for every contingency</li>
<li>Build complex, nuanced agent behaviors that are readable and verifiable</li>
</ul>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#core-concepts">Core Concepts</a></li>
<li><a href="#language-syntax-and-formatting">Language Syntax and Formatting</a></li>
<li><a href="#the-five-playbook-types">The Five Playbook Types</a></li>
<li><a href="#decomposing-tasks-into-playbooks">Decomposing Tasks into Playbooks</a></li>
<li><a href="#natural-language-vs-explicit-syntax">Natural Language vs Explicit Syntax</a></li>
<li><a href="#multi-agent-programs">Multi-Agent Programs</a></li>
<li><a href="#triggers-event-driven-programming">Triggers: Event-Driven Programming</a></li>
<li><a href="#description-placeholders">Description Placeholders</a></li>
<li><a href="#artifacts">Artifacts</a></li>
<li><a href="#common-patterns-and-best-practices">Common Patterns and Best Practices</a></li>
<li><a href="#editing-existing-programs">Editing Existing Programs</a></li>
<li><a href="#understanding-pbasm-compilation">Understanding PBAsm Compilation</a></li>
</ol>
<hr />
<h2 id="core-concepts">Core Concepts<a class="headerlink" href="#core-concepts" title="Permanent link">&para;</a></h2>
<h3 id="philosophy-software-30">Philosophy: Software 3.0<a class="headerlink" href="#philosophy-software-30" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>LLMs as CPUs</strong>: Natural language instructions are the program; the runtime compiles them to PBAsm and executes on LLM</li>
<li><strong>High-level behavior specification</strong>: Describe what agents should do, not how to do it; focus on behavior, not mechanics</li>
<li><strong>Soft + Hard logic</strong>: Run soft logic (NL) on LLM, hard logic (Python) on CPU, on same call stack</li>
<li><strong>Natural exception handling</strong>: LLM handles edge cases without explicit code for every contingency</li>
<li><strong>Verifiable execution</strong>: Programs compile to structured PBAsm for auditing and debugging</li>
<li><strong>Powerful abstractions</strong>: Meetings, triggers, seamless integration - complex patterns built into the framework</li>
</ul>
<h3 id="key-abstractions">Key Abstractions<a class="headerlink" href="#key-abstractions" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Agents</strong> (H1 <code>#</code>) = Classes with state and methods</li>
<li><strong>Playbooks</strong> (H2 <code>##</code> or <code>@playbook</code>) = Methods/functions</li>
<li><strong>Multi-agent communication</strong> = Message passing + direct calls</li>
<li><strong>Triggers</strong> = Event-driven interrupts (like CPU interrupts)</li>
<li><strong>Variables</strong> = Prefixed with <code>$</code>, typed at runtime</li>
</ul>
<hr />
<h2 id="language-syntax-and-formatting">Language Syntax and Formatting<a class="headerlink" href="#language-syntax-and-formatting" title="Permanent link">&para;</a></h2>
<h3 id="file-structure">File Structure<a class="headerlink" href="#file-structure" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gh"># AgentName</span>
</span><span id="__codeline__-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>Agent description and personality. Define capabilities and behavioral traits here.
</span><span id="__codeline__-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__codeline__-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gu">## PlaybookName($param1, $param2)</span>
</span><span id="__codeline__-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>Playbook description explaining what it does and when to use it.
</span><span id="__codeline__-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__codeline__-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">-</span><span class="w"> </span>When to execute this playbook
</span><span id="__codeline__-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__codeline__-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="k">-</span><span class="w"> </span>Step 1
</span><span id="__codeline__-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="k">-</span><span class="w"> </span>Step 2
</span><span id="__codeline__-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
</span><span id="__codeline__-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gu">### Notes</span>
</span><span id="__codeline__-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="k">-</span><span class="w"> </span>Additional guidance for LLM
</span><span id="__codeline__-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__codeline__-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="sb">```python</span>
</span><span id="__codeline__-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="c1"># Python code blocks can appear anywhere</span>
</span><span id="__codeline__-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="nd">@playbook</span>
</span><span id="__codeline__-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">PythonPlaybook</span><span class="p">(</span><span class="n">param</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__codeline__-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Docstring becomes playbook description&quot;&quot;&quot;</span>
</span><span id="__codeline__-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="k">return</span> <span class="n">result</span>
</span><span id="__codeline__-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="sb">```</span>
</span><span id="__codeline__-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
</span><span id="__codeline__-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="gh"># SecondAgent</span>
</span><span id="__codeline__-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>Another agent in the same program file
</span></code></pre></div>
<h3 id="formatting-rules">Formatting Rules<a class="headerlink" href="#formatting-rules" title="Permanent link">&para;</a></h3>
<p><strong>Heading Tags</strong>:
- <code># AgentName</code> - Agent definitions with description
- <code>## PlaybookName($params)</code> - Playbook definitions
- <code>### Triggers</code>, <code>### Steps</code>, <code>### Notes</code> - Special sections within playbooks</p>
<p><strong>Metadata</strong> - Key-value pairs at start of playbook description:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="gu">## PlaybookName</span>
</span><span id="__codeline__-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>execution_mode: raw
</span><span id="__codeline__-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>public: true
</span></code></pre></div></p>
<p><strong>Variables</strong> - Always prefixed with <code>$</code>, optional type annotations:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">-</span><span class="w"> </span>Ask user for their $name
</span><span id="__codeline__-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">-</span><span class="w"> </span>$count:int = 10
</span><span id="__codeline__-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">-</span><span class="w"> </span>$result = GetData($name)
</span></code></pre></div></p>
<p><strong>Comments</strong>: <code>&lt;!-- This is a comment in Playbooks --&gt;</code></p>
<hr />
<h2 id="the-five-playbook-types">The Five Playbook Types<a class="headerlink" href="#the-five-playbook-types" title="Permanent link">&para;</a></h2>
<h3 id="decision-framework">Decision Framework<a class="headerlink" href="#decision-framework" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__codeline__-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>START: What type of playbook do I need?
</span><span id="__codeline__-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>│
</span><span id="__codeline__-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>├─ Do I need deterministic logic, external APIs, or complex calculations?
</span><span id="__codeline__-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>│  └─ YES → Python Playbook
</span><span id="__codeline__-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>│       └─ Will I have 4+ Python playbooks in this agent and will this Python playbook NOT need to call a Markdown/ReAct/Raw Prompt playbook?
</span><span id="__codeline__-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>│           └─ YES → Extract into MCP Server instead
</span><span id="__codeline__-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>│
</span><span id="__codeline__-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>├─ Do I know the exact steps in advance?
</span><span id="__codeline__-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>│  └─ YES → Markdown Playbook
</span><span id="__codeline__-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>│
</span><span id="__codeline__-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>├─ Do steps depend on dynamic research/reasoning?
</span><span id="__codeline__-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>│  └─ YES → ReAct Playbook
</span><span id="__codeline__-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>│
</span><span id="__codeline__-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>├─ Do I need exact prompt control for single-shot task?
</span><span id="__codeline__-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>│  └─ YES → Raw Prompt Playbook
</span><span id="__codeline__-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>│
</span><span id="__codeline__-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>└─ Am I integrating external MCP server tools?
</span><span id="__codeline__-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>   └─ YES → External Playbook (via MCP agent)
</span></code></pre></div>
<h3 id="1-markdown-playbooks-structured-workflows">1. Markdown Playbooks - Structured Workflows<a class="headerlink" href="#1-markdown-playbooks-structured-workflows" title="Permanent link">&para;</a></h3>
<p><strong>Use when</strong>: Steps are known, process is repeatable, need explicit control flow</p>
<p><strong>Structure</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="gu">## PlaybookName($param1, $param2)</span>
</span><span id="__codeline__-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Description
</span><span id="__codeline__-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__codeline__-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">-</span><span class="w"> </span>When condition is met
</span><span id="__codeline__-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__codeline__-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="k">-</span><span class="w"> </span>Step with natural language instruction
</span><span id="__codeline__-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="k">-</span><span class="w"> </span>$variable = Assign from another step
</span><span id="__codeline__-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="k">-</span><span class="w"> </span>If condition
</span><span id="__codeline__-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Nested step
</span><span id="__codeline__-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>While another condition
</span><span id="__codeline__-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="k">-</span><span class="w"> </span>Deeply nested step
</span><span id="__codeline__-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="k">-</span><span class="w"> </span>Otherwise
</span><span id="__codeline__-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Alternative path
</span><span id="__codeline__-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="k">-</span><span class="w"> </span>Return result
</span><span id="__codeline__-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
</span><span id="__codeline__-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="gu">### Notes</span>
</span><span id="__codeline__-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="k">-</span><span class="w"> </span>Business rules that apply throughout execution
</span></code></pre></div></p>
<p><strong>Example</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="gu">## ProcessOrder($order_id)</span>
</span><span id="__codeline__-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Process a customer order from validation through fulfillment
</span><span id="__codeline__-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__codeline__-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="k">-</span><span class="w"> </span>Get $order from database using $order_id
</span><span id="__codeline__-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="k">-</span><span class="w"> </span>If $order was not found
</span><span id="__codeline__-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Tell user order not found
</span><span id="__codeline__-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Return error
</span><span id="__codeline__-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="k">-</span><span class="w"> </span>Validate payment for $order
</span><span id="__codeline__-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="k">-</span><span class="w"> </span>If payment is valid
</span><span id="__codeline__-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Update order status to processing
</span><span id="__codeline__-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Send confirmation email to customer
</span><span id="__codeline__-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Return success
</span><span id="__codeline__-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="k">-</span><span class="w"> </span>Otherwise
</span><span id="__codeline__-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Tell user payment failed
</span><span id="__codeline__-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Return payment error
</span></code></pre></div></p>
<p><strong>Control Flow</strong>:
- Sequential: Just list steps in order
- Conditional: <code>If condition</code>, <code>Otherwise</code>, <code>Else if condition</code>
- Loops: <code>While condition</code>, <code>For each $item in $list</code>
- Variable assignment: <code>$var = value</code> or <code>Get $var from source</code>
- Return: <code>Return value</code> or <code>Return $variable</code>
- End program: <code>End program</code> (terminates execution)</p>
<h3 id="2-react-playbooks-dynamic-reasoning">2. ReAct Playbooks - Dynamic Reasoning<a class="headerlink" href="#2-react-playbooks-dynamic-reasoning" title="Permanent link">&para;</a></h3>
<p><strong>Use when</strong>: Steps can't be predetermined, need research, adaptive behavior</p>
<p><strong>Structure</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="gu">## PlaybookName($param)</span>
</span><span id="__codeline__-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>execution_mode: react  # Optional - inferred if no Steps section
</span><span id="__codeline__-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__codeline__-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>Detailed description of task, goals, constraints, and expected output.
</span><span id="__codeline__-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__codeline__-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>&lt;planning_rules&gt;
</span><span id="__codeline__-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="k">-</span><span class="w"> </span>Rule 1 for how to approach the task
</span><span id="__codeline__-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="k">-</span><span class="w"> </span>Rule 2 for verification
</span><span id="__codeline__-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>&lt;/planning_rules&gt;
</span><span id="__codeline__-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
</span><span id="__codeline__-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>&lt;style_guide&gt;
</span><span id="__codeline__-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="k">-</span><span class="w"> </span>Tone and communication style
</span><span id="__codeline__-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="k">-</span><span class="w"> </span>Formatting preferences
</span><span id="__codeline__-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>&lt;/style_guide&gt;
</span><span id="__codeline__-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
</span><span id="__codeline__-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>&lt;output_format&gt;
</span><span id="__codeline__-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>Expected structure of final output
</span><span id="__codeline__-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>&lt;/output_format&gt;
</span><span id="__codeline__-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
</span><span id="__codeline__-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="k">-</span><span class="w"> </span>When to execute
</span></code></pre></div></p>
<p><strong>Key Points</strong>:
- No <code>### Steps</code> section
- Framework provides default think-plan-act loop
- All playbooks available as tools
- LLM decides what actions to take</p>
<p><strong>Example</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="gu">## ResearchCompany($company_name)</span>
</span><span id="__codeline__-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Conduct comprehensive competitive analysis with market positioning,
</span><span id="__codeline__-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>products, pricing, and recent developments.
</span><span id="__codeline__-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__codeline__-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>&lt;planning_rules&gt;
</span><span id="__codeline__-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="k">-</span><span class="w"> </span>Start by identifying primary products and services
</span><span id="__codeline__-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="k">-</span><span class="w"> </span>Search for recent news and financials (last 6 months)
</span><span id="__codeline__-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="k">-</span><span class="w"> </span>Verify information across multiple sources
</span><span id="__codeline__-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="k">-</span><span class="w"> </span>Compare with top 3 competitors
</span><span id="__codeline__-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>&lt;/planning_rules&gt;
</span><span id="__codeline__-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
</span><span id="__codeline__-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>&lt;output_format&gt;
</span><span id="__codeline__-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="gh"># Company Analysis: [Name]</span>
</span><span id="__codeline__-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="gu">## Overview</span>
</span><span id="__codeline__-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="gu">## Products</span>
</span><span id="__codeline__-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="gu">## Market Position</span>
</span><span id="__codeline__-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="gu">## Recent Developments</span>
</span><span id="__codeline__-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="gu">## Conclusion</span>
</span><span id="__codeline__-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>&lt;/output_format&gt;
</span></code></pre></div></p>
<h3 id="3-raw-prompt-playbooks-full-control">3. Raw Prompt Playbooks - Full Control<a class="headerlink" href="#3-raw-prompt-playbooks-full-control" title="Permanent link">&para;</a></h3>
<p><strong>Use when</strong>: Need exact prompt control, single-shot tasks, minimal overhead</p>
<p><strong>Structure</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="gu">## PlaybookName</span>
</span><span id="__codeline__-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>execution_mode: raw
</span><span id="__codeline__-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__codeline__-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>Exact prompt text. This goes directly to LLM.
</span><span id="__codeline__-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>Use {$variable} and {PlaybookCall()} for dynamic content.
</span></code></pre></div></p>
<p><strong>Key Points</strong>:
- Single LLM call, no loops
- Cannot call other playbooks during execution
- No automatic context management
- Use for classification, extraction, formatting</p>
<p><strong>Example</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="gu">## CategorizeTicket</span>
</span><span id="__codeline__-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>execution_mode: raw
</span><span id="__codeline__-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__codeline__-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Categorize this support ticket: {$ticket_message}
</span><span id="__codeline__-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__codeline__-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>Categories:
</span><span id="__codeline__-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="k">-</span><span class="w"> </span>Technical Support
</span><span id="__codeline__-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="k">-</span><span class="w"> </span>Billing  
</span><span id="__codeline__-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="k">-</span><span class="w"> </span>Account Management
</span><span id="__codeline__-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="k">-</span><span class="w"> </span>General Inquiry
</span><span id="__codeline__-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
</span><span id="__codeline__-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>Respond with ONLY the category name.
</span><span id="__codeline__-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>Category:
</span></code></pre></div></p>
<h3 id="4-python-playbooks-hard-logic">4. Python Playbooks - Hard Logic<a class="headerlink" href="#4-python-playbooks-hard-logic" title="Permanent link">&para;</a></h3>
<p><strong>Use when</strong>: Need deterministic logic, external APIs, complex calculations</p>
<p><strong>Structure</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="sb">```python</span>
</span><span id="__codeline__-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>
</span><span id="__codeline__-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__codeline__-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="nd">@playbook</span>
</span><span id="__codeline__-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">PlaybookName</span><span class="p">(</span><span class="n">param1</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">param2</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="__codeline__-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__codeline__-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="sd">    Docstring becomes playbook description.</span>
</span><span id="__codeline__-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__codeline__-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="sd">    Args:</span>
</span><span id="__codeline__-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="sd">        param1: Description</span>
</span><span id="__codeline__-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="sd">        param2: Description</span>
</span><span id="__codeline__-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>
</span><span id="__codeline__-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="sd">    Returns:</span>
</span><span id="__codeline__-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="sd">        Description</span>
</span><span id="__codeline__-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__codeline__-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>    <span class="c1"># Your Python code</span>
</span><span id="__codeline__-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">)</span>
</span><span id="__codeline__-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
</span><span id="__codeline__-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>    <span class="c1"># Can call other playbooks (Markdown or Python)</span>
</span><span id="__codeline__-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>    <span class="n">summary</span> <span class="o">=</span> <span class="k">await</span> <span class="n">SummarizeResult</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="__codeline__-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>
</span><span id="__codeline__-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>    <span class="k">return</span> <span class="n">summary</span>
</span><span id="__codeline__-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>
</span><span id="__codeline__-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="nd">@playbook</span><span class="p">(</span><span class="n">triggers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;When user provides PIN&quot;</span><span class="p">],</span> <span class="n">public</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__codeline__-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">ValidatePIN</span><span class="p">(</span><span class="n">pin</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__codeline__-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate PIN format and check database.&quot;&quot;&quot;</span>
</span><span id="__codeline__-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">pin</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span>
</span><span id="__codeline__-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="sb">```</span>
</span></code></pre></div></p>
<p><strong>Decorator Options</strong>:
- <code>@playbook</code> - Basic playbook
- <code>@playbook(public=True)</code> - Callable by other agents
- <code>@playbook(export=True)</code> - Allow implementation export
- <code>@playbook(triggers=["condition"])</code> - Add triggers
- <code>@playbook(metadata={...})</code> - Custom metadata</p>
<p><strong>Key Points</strong>:
- Full Python power: any library, complex logic, external APIs
- Use <code>await</code> to call other playbooks
- Return user-readable strings/dicts when called from Markdown
- Can call Markdown playbooks: <code>await MarkdownPlaybook(args)</code></p>
<p><strong>Python-Only Agents</strong>: You can build entire agents using only Python playbooks without any LLM calls. This is useful for deterministic workflows, prototyping, testing, or scenarios where you don't need AI reasoning. See the <strong><a href="python-only-agents/">Python-Only Agents Guide</a></strong> for details.</p>
<h3 id="when-to-extract-python-playbooks-to-mcp-server">When to Extract Python Playbooks to MCP Server<a class="headerlink" href="#when-to-extract-python-playbooks-to-mcp-server" title="Permanent link">&para;</a></h3>
<p>⚠️ <strong>Important Rule</strong>: If you have <strong>more than 3 Python playbooks</strong> in a single agent, extract them to a separate MCP server instead.</p>
<p><strong>Why Extract to MCP</strong>:
- Keeps agent code focused on behavior, not implementation
- Python tools can be reused across multiple agents
- Better separation of concerns
- Easier testing and maintenance
- Can be developed and deployed independently</p>
<p><strong>How to Extract</strong>:</p>
<ol>
<li><strong>Create MCP server file</strong> (e.g., <code>mcp.py</code>):</li>
</ol>
<p>Use the <a href="https://fastmcp.com">FastMCP</a> library to create an MCP server.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__codeline__-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span> <span class="nn">fastmcp</span> <span class="kn">import</span> <span class="n">FastMCP</span>
</span><span id="__codeline__-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__codeline__-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">mcp</span> <span class="o">=</span> <span class="n">FastMCP</span><span class="p">(</span><span class="s2">&quot;My Tools Server&quot;</span><span class="p">)</span>
</span><span id="__codeline__-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
</span><span id="__codeline__-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nd">@mcp</span><span class="o">.</span><span class="n">tool</span>
</span><span id="__codeline__-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="k">def</span> <span class="nf">GetUserInfo</span><span class="p">():</span>
</span><span id="__codeline__-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__codeline__-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="sd">    Get information about the user.</span>
</span><span id="__codeline__-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
</span><span id="__codeline__-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="sd">    Returns:</span>
</span><span id="__codeline__-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="sd">        A dictionary containing user information.</span>
</span><span id="__codeline__-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__codeline__-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;john@example.com&quot;</span><span class="p">}</span>
</span><span id="__codeline__-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
</span><span id="__codeline__-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="nd">@mcp</span><span class="o">.</span><span class="n">tool</span>
</span><span id="__codeline__-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="k">def</span> <span class="nf">CalculateSleepEfficiency</span><span class="p">(</span><span class="n">time_in_bed</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">time_asleep</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="__codeline__-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__codeline__-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="sd">    Calculate sleep efficiency percentage.</span>
</span><span id="__codeline__-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>
</span><span id="__codeline__-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="sd">    Args:</span>
</span><span id="__codeline__-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="sd">        time_in_bed: Total minutes in bed</span>
</span><span id="__codeline__-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="sd">        time_asleep: Total minutes asleep</span>
</span><span id="__codeline__-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>
</span><span id="__codeline__-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="sd">    Returns:</span>
</span><span id="__codeline__-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="sd">        Sleep efficiency as percentage</span>
</span><span id="__codeline__-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__codeline__-11-27"><a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>    <span class="k">return</span> <span class="nb">round</span><span class="p">((</span><span class="n">time_asleep</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="n">time_in_bed</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__codeline__-11-28"><a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>
</span><span id="__codeline__-11-29"><a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="__codeline__-11-30"><a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>    <span class="n">mcp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">transport</span><span class="o">=</span><span class="s2">&quot;streamable-http&quot;</span><span class="p">)</span>
</span></code></pre></div>
<ol>
<li><strong>Run the MCP server</strong>:</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__codeline__-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>fastmcp<span class="w"> </span>run<span class="w"> </span>mcp.py<span class="w"> </span>-t<span class="w"> </span>streamable-http<span class="w"> </span>--port<span class="w"> </span><span class="m">8888</span>
</span></code></pre></div>
<ol>
<li><strong>Define MCP agent in your Playbooks program</strong>:</li>
</ol>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="gh"># ToolsAgent</span>
</span><span id="__codeline__-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>This agent provides various Python tools.
</span><span id="__codeline__-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>remote:
</span><span id="__codeline__-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>  type: mcp
</span><span id="__codeline__-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>  url: http://127.0.0.1:8888/mcp
</span><span id="__codeline__-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>  transport: streamable-http
</span><span id="__codeline__-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__codeline__-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="gh"># MainAgent</span>
</span><span id="__codeline__-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>Your main agent description.
</span><span id="__codeline__-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
</span><span id="__codeline__-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="gu">## Main</span>
</span><span id="__codeline__-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="k">-</span><span class="w"> </span>Load user info from ToolsAgent
</span><span id="__codeline__-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="k">-</span><span class="w"> </span>Calculate sleep efficiency using ToolsAgent
</span><span id="__codeline__-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="k">-</span><span class="w"> </span>Tell user their sleep efficiency
</span></code></pre></div>
<p><strong>Example from insomnia.pb</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="gh"># MCP</span>
</span><span id="__codeline__-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>This agent provides various python tools that the sleep coach will use.
</span><span id="__codeline__-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>remote:
</span><span id="__codeline__-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  type: mcp
</span><span id="__codeline__-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>  url: http://127.0.0.1:8888/mcp
</span><span id="__codeline__-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>  transport: streamable-http
</span><span id="__codeline__-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
</span><span id="__codeline__-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="gh"># Sleep Coach</span>
</span><span id="__codeline__-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>You are a sleep coach helping users improve their sleep.
</span><span id="__codeline__-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>
</span><span id="__codeline__-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="gu">## Main</span>
</span><span id="__codeline__-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="k">-</span><span class="w"> </span>Load user info from MCP
</span><span id="__codeline__-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="k">-</span><span class="w"> </span>Get user&#39;s sleep efficiency from MCP
</span><span id="__codeline__-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="k">-</span><span class="w"> </span>Welcome user and use the info to help them
</span></code></pre></div>
<p><strong>When NOT to extract</strong>:</p>
<ul>
<li>✅ 1-3 Python playbooks that are tightly coupled to agent logic</li>
<li>✅ Python playbooks that call Markdown playbooks (requires <code>@playbook</code>)</li>
<li>✅ Python playbooks with triggers (requires <code>@playbook</code>)</li>
</ul>
<p><strong>When to extract</strong>:</p>
<ul>
<li>✅ 4+ Python playbooks in single agent</li>
<li>✅ Pure utility functions (calculations, API calls, data transformations)</li>
<li>✅ Tools that could be reused by multiple agents</li>
<li>✅ Complex Python logic that benefits from separate testing</li>
</ul>
<h3 id="5-external-playbooks-remote-tools">5. External Playbooks - Remote Tools<a class="headerlink" href="#5-external-playbooks-remote-tools" title="Permanent link">&para;</a></h3>
<p><strong>Use when</strong>: Integrating MCP servers, external APIs (roadmap)</p>
<p><strong>Structure</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="gh"># MCPAgent</span>
</span><span id="__codeline__-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>remote:
</span><span id="__codeline__-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>  type: mcp
</span><span id="__codeline__-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>  transport: streamable-http
</span><span id="__codeline__-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>  url: http://localhost:8000/mcp
</span><span id="__codeline__-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
</span><span id="__codeline__-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="gh"># LocalAgent</span>
</span><span id="__codeline__-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="gu">## Main</span>
</span><span id="__codeline__-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="k">-</span><span class="w"> </span>$weather = MCPAgent.get_weather(zipcode=98053)
</span><span id="__codeline__-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="k">-</span><span class="w"> </span>Tell user the $weather
</span></code></pre></div></p>
<p><strong>Key Points</strong>:
- MCP server tools automatically become playbooks
- Call like any other playbook
- Framework handles transport and auth</p>
<hr />
<h2 id="decomposing-tasks-into-playbooks">Decomposing Tasks into Playbooks<a class="headerlink" href="#decomposing-tasks-into-playbooks" title="Permanent link">&para;</a></h2>
<h3 id="decomposition-strategy">Decomposition Strategy<a class="headerlink" href="#decomposition-strategy" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Identify distinct concerns</strong>: What are the separable responsibilities?</li>
<li><strong>Look for reusability</strong>: What might be called multiple times?</li>
<li><strong>Consider testing</strong>: What would you want to test independently?</li>
<li><strong>Find boundaries</strong>: Where do soft/hard logic boundaries exist?</li>
<li><strong>Separate I/O from logic</strong>: User interaction vs computation</li>
</ol>
<h3 id="granularity-guidelines">Granularity Guidelines<a class="headerlink" href="#granularity-guidelines" title="Permanent link">&para;</a></h3>
<p><strong>Too Fine-Grained</strong> ❌
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="gu">## AskName</span>
</span><span id="__codeline__-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="k">-</span><span class="w"> </span>Ask user for name
</span><span id="__codeline__-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
</span><span id="__codeline__-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="gu">## ThankUser($name)</span>
</span><span id="__codeline__-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="k">-</span><span class="w"> </span>Thank $name
</span><span id="__codeline__-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__codeline__-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="gu">## Main</span>
</span><span id="__codeline__-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="k">-</span><span class="w"> </span>Ask user for name
</span><span id="__codeline__-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="k">-</span><span class="w"> </span>Thank the user
</span></code></pre></div></p>
<p><strong>Appropriate</strong> ✅
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="gu">## Main</span>
</span><span id="__codeline__-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="k">-</span><span class="w"> </span>Ask user for their $name
</span><span id="__codeline__-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="k">-</span><span class="w"> </span>Thank $name for providing their name
</span></code></pre></div></p>
<p><strong>Better Decomposition</strong> ✅
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="gu">## ProcessOrder</span>
</span><span id="__codeline__-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="k">-</span><span class="w"> </span>Collect user info
</span><span id="__codeline__-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="k">-</span><span class="w"> </span>Process payment
</span><span id="__codeline__-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="k">-</span><span class="w"> </span>Fulfill order
</span><span id="__codeline__-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
</span><span id="__codeline__-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="gu">## CollectUserInfo</span>
</span><span id="__codeline__-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="k">-</span><span class="w"> </span>Ask for $name, $email, $address; validate all fields
</span><span id="__codeline__-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="k">-</span><span class="w"> </span>Return collected info as dictionary
</span><span id="__codeline__-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
</span><span id="__codeline__-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="gu">## ProcessPayment($user_info)</span>
</span><span id="__codeline__-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="k">-</span><span class="w"> </span>Calculate $amount and charge payment
</span><span id="__codeline__-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="k">-</span><span class="w"> </span>Return payment record
</span></code></pre></div></p>
<h3 id="when-to-create-separate-playbooks">When to Create Separate Playbooks<a class="headerlink" href="#when-to-create-separate-playbooks" title="Permanent link">&para;</a></h3>
<p><strong>Create separate playbook when</strong>:</p>
<ul>
<li>✅ Logic might be reused elsewhere</li>
<li>✅ Has clear single responsibility</li>
<li>✅ Could be triggered independently</li>
<li>✅ Needs Python for deterministic logic</li>
<li>✅ Represents distinct business process</li>
<li>✅ Makes main flow more readable</li>
</ul>
<p><strong>Keep inline when</strong>:</p>
<ul>
<li>✅ Used only once</li>
<li>✅ Tightly coupled to parent context</li>
<li>✅ Simple, linear flow</li>
<li>✅ Would hurt readability to separate</li>
</ul>
<hr />
<h2 id="natural-language-vs-explicit-syntax">Natural Language vs Explicit Syntax<a class="headerlink" href="#natural-language-vs-explicit-syntax" title="Permanent link">&para;</a></h2>
<h3 id="the-spectrum-of-explicitness">The Spectrum of Explicitness<a class="headerlink" href="#the-spectrum-of-explicitness" title="Permanent link">&para;</a></h3>
<p>Playbooks supports a spectrum from pure natural language to Python-like explicit syntax. <strong>Prefer natural language</strong> unless explicitness aids clarity or correctness.</p>
<h3 id="variable-assignment">Variable Assignment<a class="headerlink" href="#variable-assignment" title="Permanent link">&para;</a></h3>
<p><strong>Natural Language</strong> (Preferred):
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">-</span><span class="w"> </span>Ask user for their order id
</span><span id="__codeline__-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="k">-</span><span class="w"> </span>Get order details from database
</span><span id="__codeline__-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="k">-</span><span class="w"> </span>Calculate shipping cost
</span></code></pre></div></p>
<p><strong>Explicit</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">-</span><span class="w"> </span>$order_id = AskForOrderId()
</span><span id="__codeline__-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="k">-</span><span class="w"> </span>$order_details = GetOrderDetails($order_id)
</span><span id="__codeline__-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="k">-</span><span class="w"> </span>$shipping_cost = CalculateShipping($order_details.weight, $order_details.destination)
</span></code></pre></div></p>
<h3 id="when-to-use-each-style">When to Use Each Style<a class="headerlink" href="#when-to-use-each-style" title="Permanent link">&para;</a></h3>
<p><strong>Pure Natural Language</strong>:
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">-</span><span class="w"> </span>Greet user and ask what they need help with
</span><span id="__codeline__-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="k">-</span><span class="w"> </span>Find the most relevant article for their question
</span><span id="__codeline__-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="k">-</span><span class="w"> </span>Share the article with friendly explanation
</span></code></pre></div></p>
<ul>
<li>✅ Clear intent</li>
<li>✅ One-time flow</li>
<li>✅ No complex data passing</li>
</ul>
<p><strong>Variable Names</strong> (add clarity):
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">-</span><span class="w"> </span>Ask user for their $email and $password
</span><span id="__codeline__-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="k">-</span><span class="w"> </span>Validate $email format
</span><span id="__codeline__-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">-</span><span class="w"> </span>If $email is invalid
</span><span id="__codeline__-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Tell user $email is not valid
</span></code></pre></div></p>
<ul>
<li>✅ Value used multiple times</li>
<li>✅ The variable should become part of the agent's state</li>
<li>✅ Type helps LLM understand</li>
</ul>
<p><strong>Explicit Calls</strong> (precision needed):
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">-</span><span class="w"> </span>$temp_c = ConvertToCelsius($temp_f)
</span><span id="__codeline__-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="k">-</span><span class="w"> </span>$weather = WeatherAgent.GetForecast(zipcode=$zipcode, units=&quot;metric&quot;)
</span><span id="__codeline__-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="k">-</span><span class="w"> </span>$summary = FormatWeather($weather, temperature=$temp_c)
</span></code></pre></div></p>
<ul>
<li>✅ Exact parameters matter</li>
<li>✅ Cross-agent calls</li>
<li>✅ Return value used in computation</li>
</ul>
<h3 id="function-call-syntax-options">Function Call Syntax Options<a class="headerlink" href="#function-call-syntax-options" title="Permanent link">&para;</a></h3>
<p>All of these are valid:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="gh"># Natural language</span>
</span><span id="__codeline__-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="k">-</span><span class="w"> </span>Get order status
</span><span id="__codeline__-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__codeline__-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="gh"># Explicit call with variable</span>
</span><span id="__codeline__-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="k">-</span><span class="w"> </span>$status = GetOrderStatus(order_id=$order_id)
</span><span id="__codeline__-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
</span><span id="__codeline__-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="gh"># Cross-agent call</span>
</span><span id="__codeline__-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="k">-</span><span class="w"> </span>$status = OrderService.GetOrderStatus(order_id=$order_id)
</span></code></pre></div>
<p><strong>Guidelines</strong>:</p>
<ol>
<li>Start natural, add explicitness only when needed</li>
<li>Use <code>$variables</code> when value is referenced multiple times</li>
<li>Use explicit calls for cross-agent or when parameters matter</li>
<li>Type annotations helpful for complex data: <code>$results:list</code>, <code>$config:dict</code></li>
</ol>
<hr />
<h2 id="multi-agent-programs">Multi-Agent Programs<a class="headerlink" href="#multi-agent-programs" title="Permanent link">&para;</a></h2>
<h3 id="when-to-use-multiple-agents">When to Use Multiple Agents<a class="headerlink" href="#when-to-use-multiple-agents" title="Permanent link">&para;</a></h3>
<p><strong>Use multiple agents when</strong>:</p>
<ul>
<li>✅ Different domains of expertise (TravelAdvisor, HotelAdvisor, FlightAdvisor)</li>
<li>✅ Different roles in process (Host, Player)</li>
<li>✅ Separation of concerns (Frontend, Backend, Database)</li>
<li>✅ Specialized models needed (FastAgent with GPT-4o-mini, ResearchAgent with Claude)</li>
<li>✅ Independent scaling or deployment</li>
<li>✅ Separation of LLM context and knowledge</li>
</ul>
<p><strong>Use single agent when</strong>:</p>
<ul>
<li>✅ Shared context and state</li>
<li>✅ Simple workflow</li>
<li>✅ Tight coupling between components</li>
</ul>
<h3 id="creating-multiple-agents">Creating Multiple Agents<a class="headerlink" href="#creating-multiple-agents" title="Permanent link">&para;</a></h3>
<p>Creating agents is easy in Playbooks. Simply add a new H1 tag and describe the agent.</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="gh"># PrimaryAgent</span>
</span><span id="__codeline__-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>Description of primary agent
</span><span id="__codeline__-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
</span><span id="__codeline__-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="gu">## Main</span>
</span><span id="__codeline__-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="k">-</span><span class="w"> </span>At the beginning
</span><span id="__codeline__-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="k">-</span><span class="w"> </span>Do primary work
</span><span id="__codeline__-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="k">-</span><span class="w"> </span>Call SpecializedAgent when needed
</span><span id="__codeline__-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>
</span><span id="__codeline__-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="gh"># SpecializedAgent  </span>
</span><span id="__codeline__-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>Description of specialized agent
</span><span id="__codeline__-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
</span><span id="__codeline__-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="gu">## ProcessTask($data)</span>
</span><span id="__codeline__-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>public: true
</span><span id="__codeline__-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a><span class="k">-</span><span class="w"> </span>Process $data with specialized logic
</span><span id="__codeline__-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a><span class="k">-</span><span class="w"> </span>Return result
</span></code></pre></div>
<h3 id="agent-communication-methods">Agent Communication Methods<a class="headerlink" href="#agent-communication-methods" title="Permanent link">&para;</a></h3>
<h4 id="1-direct-public-playbook-calls">1. Direct Public Playbook Calls<a class="headerlink" href="#1-direct-public-playbook-calls" title="Permanent link">&para;</a></h4>
<p>One agent directly calls another's public playbook:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="gh"># TaxAgent</span>
</span><span id="__codeline__-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="gu">## GetTaxRate($income)</span>
</span><span id="__codeline__-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>public: true
</span><span id="__codeline__-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="k">-</span><span class="w"> </span>Calculate and return tax rate based on $income
</span><span id="__codeline__-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
</span><span id="__codeline__-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="gh"># IncomeAgent</span>
</span><span id="__codeline__-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="gu">## ProcessIncome</span>
</span><span id="__codeline__-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="k">-</span><span class="w"> </span>Ask user for $income
</span><span id="__codeline__-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="k">-</span><span class="w"> </span>Get $tax_rate from TaxAgent
</span><span id="__codeline__-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="k">-</span><span class="w"> </span>Tell user their $tax_rate
</span></code></pre></div>
<p>Use for synchronous request-response with immediate return value.</p>
<h4 id="2-natural-language-messaging">2. Natural Language Messaging<a class="headerlink" href="#2-natural-language-messaging" title="Permanent link">&para;</a></h4>
<p>Send messages for asynchronous communication:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="gh"># Manager</span>
</span><span id="__codeline__-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="gu">## AssignWork($task)</span>
</span><span id="__codeline__-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="k">-</span><span class="w"> </span>Tell WorkerAgent to perform $task
</span><span id="__codeline__-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>
</span><span id="__codeline__-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="gh"># WorkerAgent</span>
</span><span id="__codeline__-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="gu">## PerformTask($task)</span>
</span><span id="__codeline__-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="k">-</span><span class="w"> </span>Perform the task
</span></code></pre></div>
<p>Use for fire-and-forget communication and async workflows.</p>
<h4 id="3-meetings-multi-party-coordination">3. Meetings - Multi-Party Coordination<a class="headerlink" href="#3-meetings-multi-party-coordination" title="Permanent link">&para;</a></h4>
<p>Host creates meeting for multi-agent coordination:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="gh"># RestaurantConsultant</span>
</span><span id="__codeline__-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="gu">## MenuRedesignMeeting</span>
</span><span id="__codeline__-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>meeting: true
</span><span id="__codeline__-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>required_attendees: [HeadChef, MarketingSpecialist]
</span><span id="__codeline__-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
</span><span id="__codeline__-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="k">-</span><span class="w"> </span>Introduce myself and explain meeting purpose
</span><span id="__codeline__-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="k">-</span><span class="w"> </span>Explain the process we&#39;ll follow
</span><span id="__codeline__-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="k">-</span><span class="w"> </span>While meeting is active
</span><span id="__codeline__-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Facilitate discussion
</span><span id="__codeline__-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Keep discussion on track
</span><span id="__codeline__-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Enforce max 30 turns
</span><span id="__codeline__-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="k">-</span><span class="w"> </span>If consensus reached
</span><span id="__codeline__-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Summarize decisions
</span><span id="__codeline__-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>End meeting
</span><span id="__codeline__-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Return menu proposal
</span><span id="__codeline__-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a><span class="k">-</span><span class="w"> </span>Otherwise
</span><span id="__codeline__-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Return failure reason
</span><span id="__codeline__-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>
</span><span id="__codeline__-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span class="gh"># HeadChef</span>
</span><span id="__codeline__-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a><span class="gu">## MenuRedesignMeeting</span>
</span><span id="__codeline__-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>meeting: true
</span><span id="__codeline__-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>
</span><span id="__codeline__-28-24"><a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-28-25"><a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a><span class="k">-</span><span class="w"> </span>Introduce myself and propose signature dishes
</span><span id="__codeline__-28-26"><a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a><span class="k">-</span><span class="w"> </span>While meeting is active
</span><span id="__codeline__-28-27"><a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Respond to questions and evaluate suggestions
</span><span id="__codeline__-28-28"><a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a>
</span><span id="__codeline__-28-29"><a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a><span class="gh"># MarketingSpecialist</span>
</span><span id="__codeline__-28-30"><a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a><span class="gu">## MenuRedesignMeeting</span>
</span><span id="__codeline__-28-31"><a id="__codelineno-28-31" name="__codelineno-28-31" href="#__codelineno-28-31"></a>meeting: true
</span><span id="__codeline__-28-32"><a id="__codelineno-28-32" name="__codelineno-28-32" href="#__codelineno-28-32"></a>
</span><span id="__codeline__-28-33"><a id="__codelineno-28-33" name="__codelineno-28-33" href="#__codelineno-28-33"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-28-34"><a id="__codelineno-28-34" name="__codelineno-28-34" href="#__codelineno-28-34"></a><span class="k">-</span><span class="w"> </span>Present market analysis
</span><span id="__codeline__-28-35"><a id="__codelineno-28-35" name="__codelineno-28-35" href="#__codelineno-28-35"></a><span class="k">-</span><span class="w"> </span>While meeting is active
</span><span id="__codeline__-28-36"><a id="__codelineno-28-36" name="__codelineno-28-36" href="#__codelineno-28-36"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Evaluate proposals and suggest pricing
</span></code></pre></div>
<p><strong>To create meeting</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="k">-</span><span class="w"> </span>Start a menu redesign meeting with HeadChef and MarketingSpecialist
</span></code></pre></div>
<p><strong>Meeting mechanics</strong>:</p>
<ul>
<li>Each agent needs a playbook with <code>meeting: true</code></li>
<li>Same playbook name across all participating agents</li>
<li>Host agent creates meeting, invites attendees</li>
<li>Meeting provides shared communication channel</li>
<li>Messages visible to all participants</li>
<li>Meeting ends when host returns from meeting playbook</li>
</ul>
<p><strong>When to use meetings</strong>:</p>
<ul>
<li>✅ Multiple agents need to coordinate</li>
<li>✅ Shared context across participants</li>
<li>✅ Back-and-forth discussion needed</li>
<li>✅ Consensus building</li>
</ul>
<h3 id="multi-agent-best-practices">Multi-Agent Best Practices<a class="headerlink" href="#multi-agent-best-practices" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Clear interfaces</strong>: Mark playbooks <code>public: true</code> when designed for cross-agent calls</li>
<li><strong>Meaningful agent names</strong>: <code>TaxAccountant</code> not <code>Agent2</code></li>
<li><strong>Document cross-agent contracts</strong>: What parameters, what returns</li>
<li><strong>Handle failures</strong>: What if agent doesn't respond?</li>
<li><strong>Avoid circular dependencies</strong>: Agent A → Agent B → Agent A can deadlock</li>
</ol>
<hr />
<h2 id="triggers-event-driven-programming">Triggers: Event-Driven Programming<a class="headerlink" href="#triggers-event-driven-programming" title="Permanent link">&para;</a></h2>
<p>Triggers are natural language conditions that cause playbooks to execute automatically - like CPU interrupts. They enable declarative, reactive behavior in your agents.</p>
<p>⚠️ <strong>Use Sparingly</strong>: Triggers add "magic" behavior that can make programs harder to understand. Only use them when they significantly simplify your code.</p>
<h3 id="why-use-triggers">Why Use Triggers?<a class="headerlink" href="#why-use-triggers" title="Permanent link">&para;</a></h3>
<p>Triggers eliminate repetitive coordination code by automatically invoking playbooks when conditions are met. The primary use case is <strong>input validation</strong> - you can validate user input automatically without cluttering your main flow with validation logic.</p>
<h3 id="when-to-use-triggers">When to Use Triggers<a class="headerlink" href="#when-to-use-triggers" title="Permanent link">&para;</a></h3>
<p>✅ <strong>DO use triggers for</strong>:</p>
<ul>
<li><strong>Input validation</strong> - Automatically validate when user provides data</li>
<li><strong>State monitoring</strong> - React to threshold violations or state changes</li>
<li><strong>Cross-cutting concerns</strong> - Behavior that applies throughout execution</li>
<li><strong>Entry points</strong> - "At the beginning" to start your program</li>
</ul>
<p>❌ <strong>DON'T use triggers for</strong>:</p>
<ul>
<li>Normal sequential logic (just use steps)</li>
<li>One-time checks (inline them instead)</li>
<li>Complex workflows (be explicit with function calls)</li>
<li>When the trigger condition is unclear</li>
</ul>
<h3 id="the-validation-pattern-before-after">The Validation Pattern: Before &amp; After<a class="headerlink" href="#the-validation-pattern-before-after" title="Permanent link">&para;</a></h3>
<p><strong>WITHOUT Triggers</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="gu">## Main</span>
</span><span id="__codeline__-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="k">-</span><span class="w"> </span>Ask user for their $email
</span><span id="__codeline__-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="k">-</span><span class="w"> </span>Validate $email and keep asking until valid
</span><span id="__codeline__-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="k">-</span><span class="w"> </span>Process login with $email
</span></code></pre></div>
<p><strong>WITH Triggers</strong> (cleaner):</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="gu">## Main</span>
</span><span id="__codeline__-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="k">-</span><span class="w"> </span>Ask user for their $email
</span><span id="__codeline__-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="k">-</span><span class="w"> </span>Process login with $email
</span><span id="__codeline__-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>
</span><span id="__codeline__-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="gu">## ValidateEmail</span>
</span><span id="__codeline__-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="k">-</span><span class="w"> </span>When user provides email
</span><span id="__codeline__-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="k">-</span><span class="w"> </span>If $email format is invalid
</span><span id="__codeline__-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Tell user email is invalid and ask again
</span></code></pre></div>
<p><strong>Key Benefit</strong>: Main flow stays clean. Validation happens automatically when user provides input, eliminating repetitive validation calls.</p>
<h3 id="trigger-types">Trigger Types<a class="headerlink" href="#trigger-types" title="Permanent link">&para;</a></h3>
<p><strong>Temporal</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="k">-</span><span class="w"> </span>At the beginning
</span><span id="__codeline__-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="k">-</span><span class="w"> </span>After 5 minutes
</span><span id="__codeline__-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="k">-</span><span class="w"> </span>At the end
</span></code></pre></div>
<p><strong>State-Based</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="k">-</span><span class="w"> </span>When $attempts &gt; 3
</span><span id="__codeline__-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="k">-</span><span class="w"> </span>When $balance becomes negative
</span><span id="__codeline__-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="k">-</span><span class="w"> </span>When $order_status is &quot;shipped&quot;
</span></code></pre></div>
<p><strong>User Interaction</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="k">-</span><span class="w"> </span>When user provides email
</span><span id="__codeline__-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">-</span><span class="w"> </span>When user asks about refund
</span><span id="__codeline__-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="k">-</span><span class="w"> </span>When user seems frustrated
</span></code></pre></div>
<p><strong>Execution Flow</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="k">-</span><span class="w"> </span>After calling ProcessPayment
</span><span id="__codeline__-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="k">-</span><span class="w"> </span>Before ending program
</span></code></pre></div>
<p><strong>External Events</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="k">-</span><span class="w"> </span>When payment webhook is received
</span><span id="__codeline__-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="k">-</span><span class="w"> </span>When inventory drops below threshold
</span></code></pre></div>
<p><strong>Agent Communication</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="k">-</span><span class="w"> </span>When another agent asks about availability
</span><span id="__codeline__-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="k">-</span><span class="w"> </span>When Manager assigns new task
</span></code></pre></div>
<h3 id="common-trigger-patterns">Common Trigger Patterns<a class="headerlink" href="#common-trigger-patterns" title="Permanent link">&para;</a></h3>
<p><strong>Pattern 1: State Guard</strong></p>
<p>Monitor state and react to violations:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="gu">## Main</span>
</span><span id="__codeline__-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="k">-</span><span class="w"> </span>Set $attempts to 0
</span><span id="__codeline__-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="k">-</span><span class="w"> </span>While not authenticated
</span><span id="__codeline__-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Ask user for credentials
</span><span id="__codeline__-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Increment $attempts
</span><span id="__codeline__-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Authenticate user
</span><span id="__codeline__-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
</span><span id="__codeline__-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="gu">## CheckAttemptLimit</span>
</span><span id="__codeline__-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="k">-</span><span class="w"> </span>When $attempts &gt; 5
</span><span id="__codeline__-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="k">-</span><span class="w"> </span>Tell user they&#39;ve exceeded maximum attempts
</span><span id="__codeline__-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="k">-</span><span class="w"> </span>End program
</span></code></pre></div>
<p><strong>Pattern 2: Intent Detection</strong></p>
<p>Respond to user intent automatically:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="gu">## Main</span>
</span><span id="__codeline__-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="k">-</span><span class="w"> </span>Welcome user
</span><span id="__codeline__-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="k">-</span><span class="w"> </span>Have conversation about their issue
</span><span id="__codeline__-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="k">-</span><span class="w"> </span>Resolve the issue
</span><span id="__codeline__-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>
</span><span id="__codeline__-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="gu">## ProvideHelp</span>
</span><span id="__codeline__-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="gu">### Triggers  </span>
</span><span id="__codeline__-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="k">-</span><span class="w"> </span>When user asks for help
</span><span id="__codeline__-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="k">-</span><span class="w"> </span>When user seems confused
</span><span id="__codeline__-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-39-12"><a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="k">-</span><span class="w"> </span>Explain available options and how to use them
</span><span id="__codeline__-39-13"><a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="k">-</span><span class="w"> </span>Ask what specific help they need
</span></code></pre></div>
<p><strong>Important</strong>: Triggers are evaluated after each step. The LLM determines when a trigger condition is met based on semantic understanding.</p>
<h3 id="trigger-best-practices">Trigger Best Practices<a class="headerlink" href="#trigger-best-practices" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Be specific</strong>: "When user provides email" not "When email"</li>
<li><strong>Avoid conflicts</strong>: Don't create multiple triggers for same condition</li>
<li><strong>Document intent</strong>: Explain why the trigger exists in playbook description</li>
<li><strong>Test edge cases</strong>: What if trigger fires mid-execution?</li>
<li><strong>Keep it simple</strong>: If you have more than 3-4 triggers total, reconsider your design</li>
<li><strong>Prefer explicit</strong>: When in doubt, use explicit function calls instead of triggers</li>
</ol>
<hr />
<h2 id="description-placeholders">Description Placeholders<a class="headerlink" href="#description-placeholders" title="Permanent link">&para;</a></h2>
<p>Inject dynamic content into playbook descriptions using <code>{expression}</code> syntax.</p>
<h3 id="basic-usage">Basic Usage<a class="headerlink" href="#basic-usage" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="gu">## ProcessOrder</span>
</span><span id="__codeline__-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>Processing order {$order_id} for customer {$customer_name}.
</span><span id="__codeline__-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>Today&#39;s date is {date.today().strftime(&quot;%Y-%m-%d&quot;)}.
</span></code></pre></div>
<p>When playbook executes:
<div class="language-text highlight"><pre><span></span><code><span id="__codeline__-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>Processing order 12345 for customer Alice Smith.
</span><span id="__codeline__-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>Today&#39;s date is 2025-10-06.
</span></code></pre></div></p>
<h3 id="what-you-can-use">What You Can Use<a class="headerlink" href="#what-you-can-use" title="Permanent link">&para;</a></h3>
<p><strong>Variables</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="gu">## ReviewTransaction</span>
</span><span id="__codeline__-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>Transaction {$transaction_id} with amount ${$amount}
</span></code></pre></div>
<p><strong>Results of Playbook Calls</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="gu">## AnswerQuestions  </span>
</span><span id="__codeline__-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>Q1 Summary: {QuarterlySummary(&quot;Q1&quot;)}
</span><span id="__codeline__-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>Q2 Summary: {QuarterlySummary(&quot;Q2&quot;)}
</span><span id="__codeline__-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>
</span><span id="__codeline__-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="k">-</span><span class="w"> </span>Answer questions based on summaries above
</span></code></pre></div>
<p><strong>Python Expressions</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="gu">## AnalyzePerformance</span>
</span><span id="__codeline__-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>Score: {round($score * 100, 2)}%
</span><span id="__codeline__-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>Status: {&quot;Excellent&quot; if $score &gt; 0.9 else &quot;Good&quot;}
</span><span id="__codeline__-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>Timestamp: {timestamp.strftime(&quot;%Y-%m-%d %H:%M&quot;)}
</span></code></pre></div>
<p><strong>Special Variables</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="gu">## Debug</span>
</span><span id="__codeline__-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>Current agent: {agent.klass}
</span><span id="__codeline__-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>Playbook: {call.playbook_name}
</span><span id="__codeline__-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>Current time: {timestamp}
</span></code></pre></div>
<h3 id="common-patterns">Common Patterns<a class="headerlink" href="#common-patterns" title="Permanent link">&para;</a></h3>
<p><strong>Contextual Dates</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="gu">## SummarizeOrder($order)</span>
</span><span id="__codeline__-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>Summarize order considering today is {date.today().strftime(&quot;%Y-%m-%d&quot;)}
</span><span id="__codeline__-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>
</span><span id="__codeline__-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="k">-</span><span class="w"> </span>If order is overdue
</span><span id="__codeline__-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Apologize for delay
</span></code></pre></div>
<p><strong>Conditional Context</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="gu">## CustomerService</span>
</span><span id="__codeline__-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>{&quot;Customer is VIP - provide premium service&quot; if $customer.tier == &quot;VIP&quot; else &quot;&quot;}
</span></code></pre></div>
<h3 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Evaluate once</strong>: Placeholders resolved when playbook starts, not re-evaluated</li>
<li><strong>Keep simple</strong>: Complex logic belongs in Python playbooks</li>
<li><strong>Import dependencies</strong>: <code>from datetime import date</code> in Python block if needed</li>
<li><strong>Security</strong>: No <code>eval</code>, <code>exec</code>, <code>subprocess</code>, <code>__import__</code></li>
</ol>
<hr />
<h2 id="artifacts">Artifacts<a class="headerlink" href="#artifacts" title="Permanent link">&para;</a></h2>
<h3 id="artifacts-efficient-long-content-handling">Artifacts - Efficient Long Content Handling<a class="headerlink" href="#artifacts-efficient-long-content-handling" title="Permanent link">&para;</a></h3>
<p>Artifacts implement pass-by-reference semantics for long text content or large objects. When large values are passed between playbooks using pass-by-value, the content gets duplicated in LLM context multiple times. Artifacts solve this by storing content once and passing only the reference.</p>
<p><strong>The Problem</strong>: Large values passed between playbooks get duplicated:
- When sent as an argument
- As a local variable in the receiving playbook
- In the state sent to the LLM</p>
<p><strong>The Solution</strong>: Artifacts work like lazy loading:
- Content stored once, referenced by name
- Automatically loaded into context when referenced
- Unloaded from context after returning from the playbook that loaded it</p>
<p><strong>Usage</strong>:
<div class="language-python highlight"><pre><span></span><code><span id="__codeline__-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1"># Automatic artifact creation (&gt;80 chars)</span>
</span><span id="__codeline__-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="err">$</span><span class="n">document</span> <span class="o">=</span> <span class="n">ReadFile</span><span class="p">(</span><span class="s2">&quot;doc.md&quot;</span><span class="p">)</span>
</span><span id="__codeline__-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
</span><span id="__codeline__-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="c1"># Explicit artifact creation</span>
</span><span id="__codeline__-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="k">await</span> <span class="n">SaveArtifact</span><span class="p">(</span><span class="s2">&quot;$report&quot;</span><span class="p">,</span> <span class="s2">&quot;Q3 Report&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot;some content...&quot;&quot;&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<p>👉 <strong><a href="artifacts/">Complete Guide</a></strong> - Detailed explanation, paged memory model, API reference, and usage notes</p>
<p><strong>Tip</strong>: Minimize artifact context time by loading and using them in separate playbooks. The artifact unloads when the playbook returns, keeping context small for later processing.</p>
<hr />
<h2 id="common-patterns-and-best-practices">Common Patterns and Best Practices<a class="headerlink" href="#common-patterns-and-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="pattern-python-markdown-composition">Pattern: Python ↔ Markdown Composition<a class="headerlink" href="#pattern-python-markdown-composition" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="sb">```python</span>
</span><span id="__codeline__-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="nd">@playbook</span>
</span><span id="__codeline__-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">ProcessItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__codeline__-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetch and process data with complex logic.&quot;&quot;&quot;</span>
</span><span id="__codeline__-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">external_api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span><span id="__codeline__-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>    <span class="n">summary</span> <span class="o">=</span> <span class="k">await</span> <span class="n">SummarizeItem</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># Call Markdown playbook</span>
</span><span id="__codeline__-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>    <span class="k">return</span> <span class="n">summary</span>
</span><span id="__codeline__-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="sb">```</span>
</span><span id="__codeline__-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>
</span><span id="__codeline__-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a><span class="gu">## SummarizeItem($item)</span>
</span><span id="__codeline__-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a><span class="k">-</span><span class="w"> </span>Format $item as user-friendly summary
</span></code></pre></div>
<h3 id="pattern-batch-operations">Pattern: Batch Operations<a class="headerlink" href="#pattern-batch-operations" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="k">-</span><span class="w"> </span>For each $order in $pending_orders
</span><span id="__codeline__-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>ProcessSingleOrder($order)
</span></code></pre></div>
<h3 id="pattern-error-handling">Pattern: Error Handling<a class="headerlink" href="#pattern-error-handling" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="gu">## SafeOperation</span>
</span><span id="__codeline__-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="k">-</span><span class="w"> </span>Try to process $data
</span><span id="__codeline__-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="k">-</span><span class="w"> </span>If operation fails
</span><span id="__codeline__-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Log error
</span><span id="__codeline__-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Tell user operation failed with reason
</span><span id="__codeline__-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Return error status
</span><span id="__codeline__-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a><span class="k">-</span><span class="w"> </span>Otherwise
</span><span id="__codeline__-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Tell user success
</span><span id="__codeline__-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Return success status
</span></code></pre></div>
<h3 id="pattern-collecting-inputs-from-user">Pattern: Collecting Inputs from User<a class="headerlink" href="#pattern-collecting-inputs-from-user" title="Permanent link">&para;</a></h3>
<p>When your agent needs information from the user, always ask for all inputs at once and establish a clear conversation loop until all valid data is acquired:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="gu">## Main</span>
</span><span id="__codeline__-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="k">-</span><span class="w"> </span>Ask user for $email and $pin, engage in a conversation till user provides valid values or gives up
</span><span id="__codeline__-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="k">-</span><span class="w"> </span>If user gives up, apologize and return
</span><span id="__codeline__-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="k">-</span><span class="w"> </span>Inform user that you were able to authenticate them
</span></code></pre></div>
<p>This pattern:</p>
<ul>
<li><strong>Asks for all required information upfront</strong> - more efficient for the user</li>
<li><strong>Includes a clear termination condition</strong> - handles the case where user wants to exit</li>
<li><strong>Validates both inputs before proceeding</strong> - ensures data quality</li>
<li><strong>Avoids sequential asking</strong> - better user experience than asking one at a time</li>
</ul>
<p><strong>Why this matters</strong>: Asking for information piece by piece creates a poor user experience. Users appreciate knowing all requirements upfront.</p>
<h3 id="pattern-mock-backend-interactions-with-python-playbooks">Pattern: Mock Backend Interactions with Python Playbooks<a class="headerlink" href="#pattern-mock-backend-interactions-with-python-playbooks" title="Permanent link">&para;</a></h3>
<p>Think if a certain action would require backend interaction (databases, APIs, authentication services). If so, use Python playbooks to encapsulate that logic. Use mock implementations as necessary to aid in development:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__codeline__-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="sb">```python</span>
</span><span id="__codeline__-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="nd">@playbook</span>
</span><span id="__codeline__-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">AuthenticateUser</span><span class="p">(</span><span class="err">$</span><span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="err">$</span><span class="n">pin</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__codeline__-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Authenticate user with email and PIN.</span>
</span><span id="__codeline__-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>
</span><span id="__codeline__-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="sd">    In production, this would call the actual authentication service.</span>
</span><span id="__codeline__-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="sd">    For now, using mock data for development.</span>
</span><span id="__codeline__-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__codeline__-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>    <span class="c1"># Mock implementation for development</span>
</span><span id="__codeline__-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a>    <span class="k">return</span> <span class="err">$</span><span class="n">email</span> <span class="o">==</span> <span class="s2">&quot;test@test.com&quot;</span> <span class="ow">and</span> <span class="err">$</span><span class="n">pin</span> <span class="o">==</span> <span class="s2">&quot;1234&quot;</span>
</span><span id="__codeline__-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a>
</span><span id="__codeline__-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a><span class="nd">@playbook</span>  
</span><span id="__codeline__-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">FetchUserProfile</span><span class="p">(</span><span class="err">$</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__codeline__-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetch user profile from database.</span>
</span><span id="__codeline__-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a>
</span><span id="__codeline__-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a><span class="sd">    Production: Query user database</span>
</span><span id="__codeline__-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a><span class="sd">    Development: Return mock data</span>
</span><span id="__codeline__-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__codeline__-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19" href="#__codelineno-53-19"></a>    <span class="c1"># Mock implementation</span>
</span><span id="__codeline__-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20" href="#__codelineno-53-20"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__codeline__-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21" href="#__codelineno-53-21"></a>        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="err">$</span><span class="n">user_id</span><span class="p">,</span>
</span><span id="__codeline__-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22" href="#__codelineno-53-22"></a>        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Test User&quot;</span><span class="p">,</span>
</span><span id="__codeline__-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23" href="#__codelineno-53-23"></a>        <span class="s2">&quot;preferences&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;theme&quot;</span><span class="p">:</span> <span class="s2">&quot;dark&quot;</span><span class="p">}</span>
</span><span id="__codeline__-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24" href="#__codelineno-53-24"></a>    <span class="p">}</span>
</span><span id="__codeline__-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25" href="#__codelineno-53-25"></a><span class="sb">```</span>
</span><span id="__codeline__-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26" href="#__codelineno-53-26"></a>
</span><span id="__codeline__-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27" href="#__codelineno-53-27"></a>
</span><span id="__codeline__-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28" href="#__codelineno-53-28"></a>This pattern:
</span><span id="__codeline__-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29" href="#__codelineno-53-29"></a>
</span><span id="__codeline__-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30" href="#__codelineno-53-30"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Separates backend logic**</span> - keeps the workflow clean and focused
</span><span id="__codeline__-53-31"><a id="__codelineno-53-31" name="__codelineno-53-31" href="#__codelineno-53-31"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Enables rapid prototyping**</span> - test workflows without backend dependencies  
</span><span id="__codeline__-53-32"><a id="__codelineno-53-32" name="__codelineno-53-32" href="#__codelineno-53-32"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Makes transition to production easier**</span> - just swap mock with real implementation
</span><span id="__codeline__-53-33"><a id="__codelineno-53-33" name="__codelineno-53-33" href="#__codelineno-53-33"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Documents backend contracts**</span> - clear interface for what backend needs to provide
</span><span id="__codeline__-53-34"><a id="__codelineno-53-34" name="__codelineno-53-34" href="#__codelineno-53-34"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Testable**</span> - mock data allows thorough testing of workflows
</span><span id="__codeline__-53-35"><a id="__codelineno-53-35" name="__codelineno-53-35" href="#__codelineno-53-35"></a>
</span><span id="__codeline__-53-36"><a id="__codelineno-53-36" name="__codelineno-53-36" href="#__codelineno-53-36"></a><span class="gs">**When to use Python playbooks for backend**</span>:
</span><span id="__codeline__-53-37"><a id="__codelineno-53-37" name="__codelineno-53-37" href="#__codelineno-53-37"></a>
</span><span id="__codeline__-53-38"><a id="__codelineno-53-38" name="__codelineno-53-38" href="#__codelineno-53-38"></a><span class="k">-</span><span class="w"> </span>Database queries or updates
</span><span id="__codeline__-53-39"><a id="__codelineno-53-39" name="__codelineno-53-39" href="#__codelineno-53-39"></a><span class="k">-</span><span class="w"> </span>External API calls
</span><span id="__codeline__-53-40"><a id="__codelineno-53-40" name="__codelineno-53-40" href="#__codelineno-53-40"></a><span class="k">-</span><span class="w"> </span>Authentication/authorization checks
</span><span id="__codeline__-53-41"><a id="__codelineno-53-41" name="__codelineno-53-41" href="#__codelineno-53-41"></a><span class="k">-</span><span class="w"> </span>Complex business logic calculations
</span><span id="__codeline__-53-42"><a id="__codelineno-53-42" name="__codelineno-53-42" href="#__codelineno-53-42"></a><span class="k">-</span><span class="w"> </span>File I/O operations
</span><span id="__codeline__-53-43"><a id="__codelineno-53-43" name="__codelineno-53-43" href="#__codelineno-53-43"></a><span class="k">-</span><span class="w"> </span>Any stateful operations
</span><span id="__codeline__-53-44"><a id="__codelineno-53-44" name="__codelineno-53-44" href="#__codelineno-53-44"></a>
</span><span id="__codeline__-53-45"><a id="__codelineno-53-45" name="__codelineno-53-45" href="#__codelineno-53-45"></a><span class="gu">### Anti-Pattern: Using step bullets for listing items, implicit loops, and redundant instructions</span>
</span><span id="__codeline__-53-46"><a id="__codelineno-53-46" name="__codelineno-53-46" href="#__codelineno-53-46"></a>
</span><span id="__codeline__-53-47"><a id="__codelineno-53-47" name="__codelineno-53-47" href="#__codelineno-53-47"></a>Bad example:
</span><span id="__codeline__-53-48"><a id="__codelineno-53-48" name="__codelineno-53-48" href="#__codelineno-53-48"></a>
</span><span id="__codeline__-53-49"><a id="__codelineno-53-49" name="__codelineno-53-49" href="#__codelineno-53-49"></a><span class="sb">```markdown</span>
</span><span id="__codeline__-53-50"><a id="__codelineno-53-50" name="__codelineno-53-50" href="#__codelineno-53-50"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-53-51"><a id="__codelineno-53-51" name="__codelineno-53-51" href="#__codelineno-53-51"></a><span class="k">-</span><span class="w"> </span>Tell user about the plan
</span><span id="__codeline__-53-52"><a id="__codelineno-53-52" name="__codelineno-53-52" href="#__codelineno-53-52"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Phase 1: Understanding and Decomposition
</span><span id="__codeline__-53-53"><a id="__codelineno-53-53" name="__codelineno-53-53" href="#__codelineno-53-53"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Phase 2: Hypothesis Generation  
</span><span id="__codeline__-53-54"><a id="__codelineno-53-54" name="__codelineno-53-54" href="#__codelineno-53-54"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Phase 3: Synthesis Assessment
</span><span id="__codeline__-53-55"><a id="__codelineno-53-55" name="__codelineno-53-55" href="#__codelineno-53-55"></a><span class="k">-</span><span class="w"> </span>Use agent collaboration
</span><span id="__codeline__-53-56"><a id="__codelineno-53-56" name="__codelineno-53-56" href="#__codelineno-53-56"></a><span class="k">-</span><span class="w"> </span>After each phase, ask MetaCognitionAgent if the phase was executed optimally
</span><span id="__codeline__-53-57"><a id="__codelineno-53-57" name="__codelineno-53-57" href="#__codelineno-53-57"></a><span class="sb">```</span>
</span><span id="__codeline__-53-58"><a id="__codelineno-53-58" name="__codelineno-53-58" href="#__codelineno-53-58"></a>
</span><span id="__codeline__-53-59"><a id="__codelineno-53-59" name="__codelineno-53-59" href="#__codelineno-53-59"></a>This anti-pattern has the following problems:
</span><span id="__codeline__-53-60"><a id="__codelineno-53-60" name="__codelineno-53-60" href="#__codelineno-53-60"></a><span class="k">-</span><span class="w"> </span>Each bullet point under Steps must be a statement to execute. The Phase 1, Phase 2, Phase 3 bullets are not, so should be in the same bullet as &quot;Tell user&quot;
</span><span id="__codeline__-53-61"><a id="__codelineno-53-61" name="__codelineno-53-61" href="#__codelineno-53-61"></a><span class="k">-</span><span class="w"> </span>Redundant instruction &quot;Use agent collaboration&quot; that can&#39;t be executed as a statement
</span><span id="__codeline__-53-62"><a id="__codelineno-53-62" name="__codelineno-53-62" href="#__codelineno-53-62"></a><span class="k">-</span><span class="w"> </span>Implicit loop &quot;After each phase&quot;
</span><span id="__codeline__-53-63"><a id="__codelineno-53-63" name="__codelineno-53-63" href="#__codelineno-53-63"></a>
</span><span id="__codeline__-53-64"><a id="__codelineno-53-64" name="__codelineno-53-64" href="#__codelineno-53-64"></a>Here&#39;s the correct way to write it:
</span><span id="__codeline__-53-65"><a id="__codelineno-53-65" name="__codelineno-53-65" href="#__codelineno-53-65"></a><span class="sb">```markdown</span>
</span><span id="__codeline__-53-66"><a id="__codelineno-53-66" name="__codelineno-53-66" href="#__codelineno-53-66"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-53-67"><a id="__codelineno-53-67" name="__codelineno-53-67" href="#__codelineno-53-67"></a><span class="k">-</span><span class="w"> </span>Tell user about the plan - Phase 1: Understanding and Decomposition, Phase 2: Hypothesis Generation, Phase 3: Synthesis Assessment
</span><span id="__codeline__-53-68"><a id="__codelineno-53-68" name="__codelineno-53-68" href="#__codelineno-53-68"></a><span class="k">-</span><span class="w"> </span>Go through each phase in order
</span><span id="__codeline__-53-69"><a id="__codelineno-53-69" name="__codelineno-53-69" href="#__codelineno-53-69"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Execute the phase with agent collaboration until the phase is complete
</span><span id="__codeline__-53-70"><a id="__codelineno-53-70" name="__codelineno-53-70" href="#__codelineno-53-70"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Ask MetaCognitionAgent if the phase was executed optimally
</span><span id="__codeline__-53-71"><a id="__codelineno-53-71" name="__codelineno-53-71" href="#__codelineno-53-71"></a><span class="sb">```</span>
</span><span id="__codeline__-53-72"><a id="__codelineno-53-72" name="__codelineno-53-72" href="#__codelineno-53-72"></a>
</span><span id="__codeline__-53-73"><a id="__codelineno-53-73" name="__codelineno-53-73" href="#__codelineno-53-73"></a>
</span><span id="__codeline__-53-74"><a id="__codelineno-53-74" name="__codelineno-53-74" href="#__codelineno-53-74"></a><span class="gu">### Best Practices Summary</span>
</span><span id="__codeline__-53-75"><a id="__codelineno-53-75" name="__codelineno-53-75" href="#__codelineno-53-75"></a>
</span><span id="__codeline__-53-76"><a id="__codelineno-53-76" name="__codelineno-53-76" href="#__codelineno-53-76"></a><span class="gs">**DO**</span>:
</span><span id="__codeline__-53-77"><a id="__codelineno-53-77" name="__codelineno-53-77" href="#__codelineno-53-77"></a>
</span><span id="__codeline__-53-78"><a id="__codelineno-53-78" name="__codelineno-53-78" href="#__codelineno-53-78"></a><span class="k">-</span><span class="w"> </span>✅ Write playbook descriptions for humans - explain what and why
</span><span id="__codeline__-53-79"><a id="__codelineno-53-79" name="__codelineno-53-79" href="#__codelineno-53-79"></a><span class="k">-</span><span class="w"> </span>✅ Use natural language unless explicitness helps
</span><span id="__codeline__-53-80"><a id="__codelineno-53-80" name="__codelineno-53-80" href="#__codelineno-53-80"></a><span class="k">-</span><span class="w"> </span>✅ Add <span class="sb">`### Notes`</span> for business rules
</span><span id="__codeline__-53-81"><a id="__codelineno-53-81" name="__codelineno-53-81" href="#__codelineno-53-81"></a><span class="k">-</span><span class="w"> </span>✅ Prefer Markdown for workflows, Python for logic
</span><span id="__codeline__-53-82"><a id="__codelineno-53-82" name="__codelineno-53-82" href="#__codelineno-53-82"></a><span class="k">-</span><span class="w"> </span>✅ Extract 4+ Python playbooks to MCP server
</span><span id="__codeline__-53-83"><a id="__codelineno-53-83" name="__codelineno-53-83" href="#__codelineno-53-83"></a><span class="k">-</span><span class="w"> </span>✅ Make cross-agent playbooks <span class="sb">`public: true`</span>
</span><span id="__codeline__-53-84"><a id="__codelineno-53-84" name="__codelineno-53-84" href="#__codelineno-53-84"></a><span class="k">-</span><span class="w"> </span>✅ Use triggers sparingly - mainly for input validation
</span><span id="__codeline__-53-85"><a id="__codelineno-53-85" name="__codelineno-53-85" href="#__codelineno-53-85"></a><span class="k">-</span><span class="w"> </span>✅ Handle edge cases and errors gracefully
</span><span id="__codeline__-53-86"><a id="__codelineno-53-86" name="__codelineno-53-86" href="#__codelineno-53-86"></a><span class="k">-</span><span class="w"> </span>✅ Use meaningful variable names
</span><span id="__codeline__-53-87"><a id="__codelineno-53-87" name="__codelineno-53-87" href="#__codelineno-53-87"></a><span class="k">-</span><span class="w"> </span>✅ Break complex playbooks into smaller ones
</span><span id="__codeline__-53-88"><a id="__codelineno-53-88" name="__codelineno-53-88" href="#__codelineno-53-88"></a><span class="k">-</span><span class="w"> </span>✅ Test with different user inputs mentally
</span><span id="__codeline__-53-89"><a id="__codelineno-53-89" name="__codelineno-53-89" href="#__codelineno-53-89"></a><span class="k">-</span><span class="w"> </span>✅ Ask for all required information at once with conversation loops
</span><span id="__codeline__-53-90"><a id="__codelineno-53-90" name="__codelineno-53-90" href="#__codelineno-53-90"></a><span class="k">-</span><span class="w"> </span>✅ Use mock Python playbooks for backend processes during development
</span><span id="__codeline__-53-91"><a id="__codelineno-53-91" name="__codelineno-53-91" href="#__codelineno-53-91"></a><span class="k">-</span><span class="w"> </span>✅ Each step bullet must be a complete executable statement.
</span><span id="__codeline__-53-92"><a id="__codelineno-53-92" name="__codelineno-53-92" href="#__codelineno-53-92"></a>
</span><span id="__codeline__-53-93"><a id="__codelineno-53-93" name="__codelineno-53-93" href="#__codelineno-53-93"></a><span class="gs">**DON&#39;T**</span>:
</span><span id="__codeline__-53-94"><a id="__codelineno-53-94" name="__codelineno-53-94" href="#__codelineno-53-94"></a>
</span><span id="__codeline__-53-95"><a id="__codelineno-53-95" name="__codelineno-53-95" href="#__codelineno-53-95"></a><span class="k">-</span><span class="w"> </span>❌ Over-engineer simple flows
</span><span id="__codeline__-53-96"><a id="__codelineno-53-96" name="__codelineno-53-96" href="#__codelineno-53-96"></a><span class="k">-</span><span class="w"> </span>❌ Create too many tiny playbooks
</span><span id="__codeline__-53-97"><a id="__codelineno-53-97" name="__codelineno-53-97" href="#__codelineno-53-97"></a><span class="k">-</span><span class="w"> </span>❌ Use Raw mode unless truly needed
</span><span id="__codeline__-53-98"><a id="__codelineno-53-98" name="__codelineno-53-98" href="#__codelineno-53-98"></a><span class="k">-</span><span class="w"> </span>❌ Ignore error cases
</span><span id="__codeline__-53-99"><a id="__codelineno-53-99" name="__codelineno-53-99" href="#__codelineno-53-99"></a><span class="k">-</span><span class="w"> </span>❌ Make circular agent dependencies
</span><span id="__codeline__-53-100"><a id="__codelineno-53-100" name="__codelineno-53-100" href="#__codelineno-53-100"></a><span class="k">-</span><span class="w"> </span>❌ Use explicit syntax when natural language is clear
</span><span id="__codeline__-53-101"><a id="__codelineno-53-101" name="__codelineno-53-101" href="#__codelineno-53-101"></a><span class="k">-</span><span class="w"> </span>❌ Forget to document cross-agent contracts
</span><span id="__codeline__-53-102"><a id="__codelineno-53-102" name="__codelineno-53-102" href="#__codelineno-53-102"></a><span class="k">-</span><span class="w"> </span>❌ Overuse triggers - prefer explicit calls when flow is clearer
</span><span id="__codeline__-53-103"><a id="__codelineno-53-103" name="__codelineno-53-103" href="#__codelineno-53-103"></a><span class="k">-</span><span class="w"> </span>❌ Use triggers for sequential logic
</span><span id="__codeline__-53-104"><a id="__codelineno-53-104" name="__codelineno-53-104" href="#__codelineno-53-104"></a><span class="k">-</span><span class="w"> </span>❌ Ask for inputs one at a time when you need multiple pieces of information
</span><span id="__codeline__-53-105"><a id="__codelineno-53-105" name="__codelineno-53-105" href="#__codelineno-53-105"></a><span class="k">-</span><span class="w"> </span>❌ Mix backend API calls directly into workflow steps
</span><span id="__codeline__-53-106"><a id="__codelineno-53-106" name="__codelineno-53-106" href="#__codelineno-53-106"></a>
</span><span id="__codeline__-53-107"><a id="__codelineno-53-107" name="__codelineno-53-107" href="#__codelineno-53-107"></a>---
</span><span id="__codeline__-53-108"><a id="__codelineno-53-108" name="__codelineno-53-108" href="#__codelineno-53-108"></a>
</span><span id="__codeline__-53-109"><a id="__codelineno-53-109" name="__codelineno-53-109" href="#__codelineno-53-109"></a><span class="gu">## Editing Existing Programs</span>
</span><span id="__codeline__-53-110"><a id="__codelineno-53-110" name="__codelineno-53-110" href="#__codelineno-53-110"></a>
</span><span id="__codeline__-53-111"><a id="__codelineno-53-111" name="__codelineno-53-111" href="#__codelineno-53-111"></a><span class="gu">### Surgical Editing Principles</span>
</span><span id="__codeline__-53-112"><a id="__codelineno-53-112" name="__codelineno-53-112" href="#__codelineno-53-112"></a>
</span><span id="__codeline__-53-113"><a id="__codelineno-53-113" name="__codelineno-53-113" href="#__codelineno-53-113"></a>When modifying existing Playbooks programs:
</span><span id="__codeline__-53-114"><a id="__codelineno-53-114" name="__codelineno-53-114" href="#__codelineno-53-114"></a>
</span><span id="__codeline__-53-115"><a id="__codelineno-53-115" name="__codelineno-53-115" href="#__codelineno-53-115"></a><span class="k">1.</span> <span class="gs">**Read and understand**</span>: Review the file, understand its structure and intent
</span><span id="__codeline__-53-116"><a id="__codelineno-53-116" name="__codelineno-53-116" href="#__codelineno-53-116"></a><span class="k">2.</span> <span class="gs">**Minimal changes**</span>: Change only what&#39;s needed to achieve the goal
</span><span id="__codeline__-53-117"><a id="__codelineno-53-117" name="__codelineno-53-117" href="#__codelineno-53-117"></a><span class="k">3.</span> <span class="gs">**Preserve style**</span>: Match existing natural language vs explicit style
</span><span id="__codeline__-53-118"><a id="__codelineno-53-118" name="__codelineno-53-118" href="#__codelineno-53-118"></a><span class="k">4.</span> <span class="gs">**Maintain consistency**</span>: Keep variable naming and structure patterns
</span><span id="__codeline__-53-119"><a id="__codelineno-53-119" name="__codelineno-53-119" href="#__codelineno-53-119"></a><span class="k">5.</span> <span class="gs">**Test mentally**</span>: Think through execution flow after changes
</span><span id="__codeline__-53-120"><a id="__codelineno-53-120" name="__codelineno-53-120" href="#__codelineno-53-120"></a>
</span><span id="__codeline__-53-121"><a id="__codelineno-53-121" name="__codelineno-53-121" href="#__codelineno-53-121"></a><span class="gu">### Common Edit Patterns</span>
</span><span id="__codeline__-53-122"><a id="__codelineno-53-122" name="__codelineno-53-122" href="#__codelineno-53-122"></a>
</span><span id="__codeline__-53-123"><a id="__codelineno-53-123" name="__codelineno-53-123" href="#__codelineno-53-123"></a><span class="gs">**Adding a new playbook**</span>:
</span><span id="__codeline__-53-124"><a id="__codelineno-53-124" name="__codelineno-53-124" href="#__codelineno-53-124"></a><span class="sb">```markdown</span>
</span><span id="__codeline__-53-125"><a id="__codelineno-53-125" name="__codelineno-53-125" href="#__codelineno-53-125"></a><span class="gu">## NewPlaybook($param)</span>
</span><span id="__codeline__-53-126"><a id="__codelineno-53-126" name="__codelineno-53-126" href="#__codelineno-53-126"></a>Description
</span><span id="__codeline__-53-127"><a id="__codelineno-53-127" name="__codelineno-53-127" href="#__codelineno-53-127"></a>
</span><span id="__codeline__-53-128"><a id="__codelineno-53-128" name="__codelineno-53-128" href="#__codelineno-53-128"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-53-129"><a id="__codelineno-53-129" name="__codelineno-53-129" href="#__codelineno-53-129"></a><span class="k">-</span><span class="w"> </span>New logic
</span><span id="__codeline__-53-130"><a id="__codelineno-53-130" name="__codelineno-53-130" href="#__codelineno-53-130"></a><span class="sb">```</span>
</span><span id="__codeline__-53-131"><a id="__codelineno-53-131" name="__codelineno-53-131" href="#__codelineno-53-131"></a>
</span><span id="__codeline__-53-132"><a id="__codelineno-53-132" name="__codelineno-53-132" href="#__codelineno-53-132"></a><span class="gs">**Modifying steps**</span>: Find the playbook, locate the specific step, update it, and ensure variable references still work.
</span><span id="__codeline__-53-133"><a id="__codelineno-53-133" name="__codelineno-53-133" href="#__codelineno-53-133"></a>
</span><span id="__codeline__-53-134"><a id="__codelineno-53-134" name="__codelineno-53-134" href="#__codelineno-53-134"></a>---
</span><span id="__codeline__-53-135"><a id="__codelineno-53-135" name="__codelineno-53-135" href="#__codelineno-53-135"></a>
</span><span id="__codeline__-53-136"><a id="__codelineno-53-136" name="__codelineno-53-136" href="#__codelineno-53-136"></a><span class="gu">## Understanding PBAsm Compilation</span>
</span><span id="__codeline__-53-137"><a id="__codelineno-53-137" name="__codelineno-53-137" href="#__codelineno-53-137"></a>
</span><span id="__codeline__-53-138"><a id="__codelineno-53-138" name="__codelineno-53-138" href="#__codelineno-53-138"></a><span class="gu">### Why PBAsm Matters</span>
</span><span id="__codeline__-53-139"><a id="__codelineno-53-139" name="__codelineno-53-139" href="#__codelineno-53-139"></a>
</span><span id="__codeline__-53-140"><a id="__codelineno-53-140" name="__codelineno-53-140" href="#__codelineno-53-140"></a>When you write Playbooks, the compiler transforms it to Playbooks Assembly Language (PBAsm):
</span><span id="__codeline__-53-141"><a id="__codelineno-53-141" name="__codelineno-53-141" href="#__codelineno-53-141"></a>
</span><span id="__codeline__-53-142"><a id="__codelineno-53-142" name="__codelineno-53-142" href="#__codelineno-53-142"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Adds explicit types**</span>: <span class="sb">`$name`</span> → <span class="sb">`$name:str`</span>
</span><span id="__codeline__-53-143"><a id="__codelineno-53-143" name="__codelineno-53-143" href="#__codelineno-53-143"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Adds line numbers**</span>: Hierarchical (01, 01.01, 01.01.01)
</span><span id="__codeline__-53-144"><a id="__codelineno-53-144" name="__codelineno-53-144" href="#__codelineno-53-144"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Adds opcodes**</span>: QUE (queue), CND (conditional), RET (return), YLD (yield)
</span><span id="__codeline__-53-145"><a id="__codelineno-53-145" name="__codelineno-53-145" href="#__codelineno-53-145"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Explicit yields**</span>: Shows when LLM yields control
</span><span id="__codeline__-53-146"><a id="__codelineno-53-146" name="__codelineno-53-146" href="#__codelineno-53-146"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Trigger labels**</span>: T1:BGN, T2:CND, etc.
</span><span id="__codeline__-53-147"><a id="__codelineno-53-147" name="__codelineno-53-147" href="#__codelineno-53-147"></a>
</span><span id="__codeline__-53-148"><a id="__codelineno-53-148" name="__codelineno-53-148" href="#__codelineno-53-148"></a><span class="gu">### Compilation Example</span>
</span><span id="__codeline__-53-149"><a id="__codelineno-53-149" name="__codelineno-53-149" href="#__codelineno-53-149"></a>
</span><span id="__codeline__-53-150"><a id="__codelineno-53-150" name="__codelineno-53-150" href="#__codelineno-53-150"></a><span class="gs">**Source**</span>: <span class="sb">`- Ask user for their name`</span>
</span><span id="__codeline__-53-151"><a id="__codelineno-53-151" name="__codelineno-53-151" href="#__codelineno-53-151"></a>
</span><span id="__codeline__-53-152"><a id="__codelineno-53-152" name="__codelineno-53-152" href="#__codelineno-53-152"></a><span class="gs">**Compiled**</span>: <span class="sb">`- 01:QUE Say(user, Ask user for their $name:str); YLD for user`</span>
</span><span id="__codeline__-53-153"><a id="__codelineno-53-153" name="__codelineno-53-153" href="#__codelineno-53-153"></a>
</span><span id="__codeline__-53-154"><a id="__codelineno-53-154" name="__codelineno-53-154" href="#__codelineno-53-154"></a>Adds: line numbers (01), opcodes (QUE), explicit types ($name:str), yield points (YLD for user).
</span><span id="__codeline__-53-155"><a id="__codelineno-53-155" name="__codelineno-53-155" href="#__codelineno-53-155"></a>
</span><span id="__codeline__-53-156"><a id="__codelineno-53-156" name="__codelineno-53-156" href="#__codelineno-53-156"></a><span class="gu">### Key PBAsm Concepts</span>
</span><span id="__codeline__-53-157"><a id="__codelineno-53-157" name="__codelineno-53-157" href="#__codelineno-53-157"></a>
</span><span id="__codeline__-53-158"><a id="__codelineno-53-158" name="__codelineno-53-158" href="#__codelineno-53-158"></a><span class="gs">**Opcodes**</span>: QUE (queue operation), CND (conditional), RET (return), YLD (yield), EXE (execute), TNK (think), JMP (jump)
</span><span id="__codeline__-53-159"><a id="__codelineno-53-159" name="__codelineno-53-159" href="#__codelineno-53-159"></a>
</span><span id="__codeline__-53-160"><a id="__codelineno-53-160" name="__codelineno-53-160" href="#__codelineno-53-160"></a><span class="gs">**Yield Reasons**</span>: <span class="sb">`for user`</span> (wait for input), <span class="sb">`for call`</span> (execute queued calls), <span class="sb">`for agent`</span> (wait for message), <span class="sb">`for exit`</span> (end program)
</span><span id="__codeline__-53-161"><a id="__codelineno-53-161" name="__codelineno-53-161" href="#__codelineno-53-161"></a>
</span><span id="__codeline__-53-162"><a id="__codelineno-53-162" name="__codelineno-53-162" href="#__codelineno-53-162"></a><span class="gs">**Line Numbers**</span>: Hierarchical (01, 01.01, 01.02) enable jumps and track execution position
</span><span id="__codeline__-53-163"><a id="__codelineno-53-163" name="__codelineno-53-163" href="#__codelineno-53-163"></a>
</span><span id="__codeline__-53-164"><a id="__codelineno-53-164" name="__codelineno-53-164" href="#__codelineno-53-164"></a><span class="gu">### Why This Helps You</span>
</span><span id="__codeline__-53-165"><a id="__codelineno-53-165" name="__codelineno-53-165" href="#__codelineno-53-165"></a>
</span><span id="__codeline__-53-166"><a id="__codelineno-53-166" name="__codelineno-53-166" href="#__codelineno-53-166"></a><span class="k">1.</span> <span class="gs">**Debugging**</span>: When user reports issues, think about PBAsm execution
</span><span id="__codeline__-53-167"><a id="__codelineno-53-167" name="__codelineno-53-167" href="#__codelineno-53-167"></a><span class="k">2.</span> <span class="gs">**Precision**</span>: Know that fuzzy NL gets converted to structured form
</span><span id="__codeline__-53-168"><a id="__codelineno-53-168" name="__codelineno-53-168" href="#__codelineno-53-168"></a><span class="k">3.</span> <span class="gs">**Optimization**</span>: Understand when LLM calls happen (at YLD points)
</span><span id="__codeline__-53-169"><a id="__codelineno-53-169" name="__codelineno-53-169" href="#__codelineno-53-169"></a><span class="k">4.</span> <span class="gs">**Reasoning**</span>: Picture how LLM executes line by line
</span><span id="__codeline__-53-170"><a id="__codelineno-53-170" name="__codelineno-53-170" href="#__codelineno-53-170"></a>
</span><span id="__codeline__-53-171"><a id="__codelineno-53-171" name="__codelineno-53-171" href="#__codelineno-53-171"></a><span class="gu">### Don&#39;t Write PBAsm</span>
</span><span id="__codeline__-53-172"><a id="__codelineno-53-172" name="__codelineno-53-172" href="#__codelineno-53-172"></a>
</span><span id="__codeline__-53-173"><a id="__codelineno-53-173" name="__codelineno-53-173" href="#__codelineno-53-173"></a><span class="k">-</span><span class="w"> </span>❌ Never write PBAsm directly
</span><span id="__codeline__-53-174"><a id="__codelineno-53-174" name="__codelineno-53-174" href="#__codelineno-53-174"></a><span class="k">-</span><span class="w"> </span>✅ Write natural Playbooks language
</span><span id="__codeline__-53-175"><a id="__codelineno-53-175" name="__codelineno-53-175" href="#__codelineno-53-175"></a><span class="k">-</span><span class="w"> </span>✅ Compiler handles transformation
</span><span id="__codeline__-53-176"><a id="__codelineno-53-176" name="__codelineno-53-176" href="#__codelineno-53-176"></a><span class="k">-</span><span class="w"> </span>✅ Understanding PBAsm helps debugging and optimization
</span><span id="__codeline__-53-177"><a id="__codelineno-53-177" name="__codelineno-53-177" href="#__codelineno-53-177"></a>
</span><span id="__codeline__-53-178"><a id="__codelineno-53-178" name="__codelineno-53-178" href="#__codelineno-53-178"></a>---
</span><span id="__codeline__-53-179"><a id="__codelineno-53-179" name="__codelineno-53-179" href="#__codelineno-53-179"></a>
</span><span id="__codeline__-53-180"><a id="__codelineno-53-180" name="__codelineno-53-180" href="#__codelineno-53-180"></a><span class="gu">## Quick Reference</span>
</span><span id="__codeline__-53-181"><a id="__codelineno-53-181" name="__codelineno-53-181" href="#__codelineno-53-181"></a>
</span><span id="__codeline__-53-182"><a id="__codelineno-53-182" name="__codelineno-53-182" href="#__codelineno-53-182"></a><span class="gu">### Minimal Working Program</span>
</span><span id="__codeline__-53-183"><a id="__codelineno-53-183" name="__codelineno-53-183" href="#__codelineno-53-183"></a>
</span><span id="__codeline__-53-184"><a id="__codelineno-53-184" name="__codelineno-53-184" href="#__codelineno-53-184"></a><span class="sb">```markdown</span>
</span><span id="__codeline__-53-185"><a id="__codelineno-53-185" name="__codelineno-53-185" href="#__codelineno-53-185"></a><span class="gh"># MyAgent</span>
</span><span id="__codeline__-53-186"><a id="__codelineno-53-186" name="__codelineno-53-186" href="#__codelineno-53-186"></a>Description of what this agent does
</span><span id="__codeline__-53-187"><a id="__codelineno-53-187" name="__codelineno-53-187" href="#__codelineno-53-187"></a>
</span><span id="__codeline__-53-188"><a id="__codelineno-53-188" name="__codelineno-53-188" href="#__codelineno-53-188"></a><span class="gu">## Main</span>
</span><span id="__codeline__-53-189"><a id="__codelineno-53-189" name="__codelineno-53-189" href="#__codelineno-53-189"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-53-190"><a id="__codelineno-53-190" name="__codelineno-53-190" href="#__codelineno-53-190"></a><span class="k">-</span><span class="w"> </span>At the beginning
</span><span id="__codeline__-53-191"><a id="__codelineno-53-191" name="__codelineno-53-191" href="#__codelineno-53-191"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-53-192"><a id="__codelineno-53-192" name="__codelineno-53-192" href="#__codelineno-53-192"></a><span class="k">-</span><span class="w"> </span>Greet user
</span><span id="__codeline__-53-193"><a id="__codelineno-53-193" name="__codelineno-53-193" href="#__codelineno-53-193"></a><span class="k">-</span><span class="w"> </span>Ask user what they need help with
</span><span id="__codeline__-53-194"><a id="__codelineno-53-194" name="__codelineno-53-194" href="#__codelineno-53-194"></a><span class="k">-</span><span class="w"> </span>Help them
</span><span id="__codeline__-53-195"><a id="__codelineno-53-195" name="__codelineno-53-195" href="#__codelineno-53-195"></a><span class="k">-</span><span class="w"> </span>End program
</span><span id="__codeline__-53-196"><a id="__codelineno-53-196" name="__codelineno-53-196" href="#__codelineno-53-196"></a><span class="sb">```</span>
</span><span id="__codeline__-53-197"><a id="__codelineno-53-197" name="__codelineno-53-197" href="#__codelineno-53-197"></a>
</span><span id="__codeline__-53-198"><a id="__codelineno-53-198" name="__codelineno-53-198" href="#__codelineno-53-198"></a><span class="gu">### Complete Example</span>
</span><span id="__codeline__-53-199"><a id="__codelineno-53-199" name="__codelineno-53-199" href="#__codelineno-53-199"></a>
</span><span id="__codeline__-53-200"><a id="__codelineno-53-200" name="__codelineno-53-200" href="#__codelineno-53-200"></a>````markdown
</span><span id="__codeline__-53-201"><a id="__codelineno-53-201" name="__codelineno-53-201" href="#__codelineno-53-201"></a><span class="gh"># TaskAgent</span>
</span><span id="__codeline__-53-202"><a id="__codelineno-53-202" name="__codelineno-53-202" href="#__codelineno-53-202"></a>You help users manage their tasks efficiently.
</span><span id="__codeline__-53-203"><a id="__codelineno-53-203" name="__codelineno-53-203" href="#__codelineno-53-203"></a>
</span><span id="__codeline__-53-204"><a id="__codelineno-53-204" name="__codelineno-53-204" href="#__codelineno-53-204"></a><span class="sb">```python</span>
</span><span id="__codeline__-53-205"><a id="__codelineno-53-205" name="__codelineno-53-205" href="#__codelineno-53-205"></a><span class="nd">@playbook</span>
</span><span id="__codeline__-53-206"><a id="__codelineno-53-206" name="__codelineno-53-206" href="#__codelineno-53-206"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">SaveTask</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__codeline__-53-207"><a id="__codelineno-53-207" name="__codelineno-53-207" href="#__codelineno-53-207"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Save task to database (mock implementation).&quot;&quot;&quot;</span>
</span><span id="__codeline__-53-208"><a id="__codelineno-53-208" name="__codelineno-53-208" href="#__codelineno-53-208"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">,</span> <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="n">task</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;pending&quot;</span><span class="p">}</span>
</span><span id="__codeline__-53-209"><a id="__codelineno-53-209" name="__codelineno-53-209" href="#__codelineno-53-209"></a><span class="sb">```</span>
</span><span id="__codeline__-53-210"><a id="__codelineno-53-210" name="__codelineno-53-210" href="#__codelineno-53-210"></a>
</span><span id="__codeline__-53-211"><a id="__codelineno-53-211" name="__codelineno-53-211" href="#__codelineno-53-211"></a><span class="gu">## Main</span>
</span><span id="__codeline__-53-212"><a id="__codelineno-53-212" name="__codelineno-53-212" href="#__codelineno-53-212"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-53-213"><a id="__codelineno-53-213" name="__codelineno-53-213" href="#__codelineno-53-213"></a><span class="k">-</span><span class="w"> </span>At the beginning
</span><span id="__codeline__-53-214"><a id="__codelineno-53-214" name="__codelineno-53-214" href="#__codelineno-53-214"></a>
</span><span id="__codeline__-53-215"><a id="__codelineno-53-215" name="__codelineno-53-215" href="#__codelineno-53-215"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-53-216"><a id="__codelineno-53-216" name="__codelineno-53-216" href="#__codelineno-53-216"></a><span class="k">-</span><span class="w"> </span>Greet user
</span><span id="__codeline__-53-217"><a id="__codelineno-53-217" name="__codelineno-53-217" href="#__codelineno-53-217"></a><span class="k">-</span><span class="w"> </span>Ask what they&#39;d like to do
</span><span id="__codeline__-53-218"><a id="__codelineno-53-218" name="__codelineno-53-218" href="#__codelineno-53-218"></a><span class="k">-</span><span class="w"> </span>If user wants to add a task
</span><span id="__codeline__-53-219"><a id="__codelineno-53-219" name="__codelineno-53-219" href="#__codelineno-53-219"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Add a new task
</span><span id="__codeline__-53-220"><a id="__codelineno-53-220" name="__codelineno-53-220" href="#__codelineno-53-220"></a><span class="k">-</span><span class="w"> </span>If user wants to list tasks
</span><span id="__codeline__-53-221"><a id="__codelineno-53-221" name="__codelineno-53-221" href="#__codelineno-53-221"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Show all pending tasks
</span><span id="__codeline__-53-222"><a id="__codelineno-53-222" name="__codelineno-53-222" href="#__codelineno-53-222"></a><span class="k">-</span><span class="w"> </span>End program
</span><span id="__codeline__-53-223"><a id="__codelineno-53-223" name="__codelineno-53-223" href="#__codelineno-53-223"></a>
</span><span id="__codeline__-53-224"><a id="__codelineno-53-224" name="__codelineno-53-224" href="#__codelineno-53-224"></a><span class="gu">## AddTask</span>
</span><span id="__codeline__-53-225"><a id="__codelineno-53-225" name="__codelineno-53-225" href="#__codelineno-53-225"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-53-226"><a id="__codelineno-53-226" name="__codelineno-53-226" href="#__codelineno-53-226"></a><span class="k">-</span><span class="w"> </span>Ask user for $task_description
</span><span id="__codeline__-53-227"><a id="__codelineno-53-227" name="__codelineno-53-227" href="#__codelineno-53-227"></a><span class="k">-</span><span class="w"> </span>Save the task
</span><span id="__codeline__-53-228"><a id="__codelineno-53-228" name="__codelineno-53-228" href="#__codelineno-53-228"></a><span class="k">-</span><span class="w"> </span>Tell user task was added successfully
</span><span id="__codeline__-53-229"><a id="__codelineno-53-229" name="__codelineno-53-229" href="#__codelineno-53-229"></a>
</span><span id="__codeline__-53-230"><a id="__codelineno-53-230" name="__codelineno-53-230" href="#__codelineno-53-230"></a><span class="gu">## ValidateTaskDescription</span>
</span><span id="__codeline__-53-231"><a id="__codelineno-53-231" name="__codelineno-53-231" href="#__codelineno-53-231"></a><span class="gu">### Triggers</span>
</span><span id="__codeline__-53-232"><a id="__codelineno-53-232" name="__codelineno-53-232" href="#__codelineno-53-232"></a><span class="k">-</span><span class="w"> </span>When user provides task description
</span><span id="__codeline__-53-233"><a id="__codelineno-53-233" name="__codelineno-53-233" href="#__codelineno-53-233"></a>
</span><span id="__codeline__-53-234"><a id="__codelineno-53-234" name="__codelineno-53-234" href="#__codelineno-53-234"></a><span class="gu">### Steps</span>
</span><span id="__codeline__-53-235"><a id="__codelineno-53-235" name="__codelineno-53-235" href="#__codelineno-53-235"></a><span class="k">-</span><span class="w"> </span>If $task_description is empty
</span><span id="__codeline__-53-236"><a id="__codelineno-53-236" name="__codelineno-53-236" href="#__codelineno-53-236"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Tell user task cannot be empty
</span><span id="__codeline__-53-237"><a id="__codelineno-53-237" name="__codelineno-53-237" href="#__codelineno-53-237"></a><span class="w">  </span><span class="k">-</span><span class="w"> </span>Ask again
</span></code></pre></div>
<h3 id="cheat-sheet">Cheat Sheet<a class="headerlink" href="#cheat-sheet" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Task</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Define agent</td>
<td><code># AgentName</code></td>
</tr>
<tr>
<td>Define playbook</td>
<td><code>## PlaybookName($param)</code></td>
</tr>
<tr>
<td>Add trigger</td>
<td><code>### Triggers</code><br><code>- When condition</code></td>
</tr>
<tr>
<td>Add steps</td>
<td><code>### Steps</code><br><code>- Step 1</code></td>
</tr>
<tr>
<td>Variable</td>
<td><code>$variable_name</code></td>
</tr>
<tr>
<td>Typed variable</td>
<td><code>$count:int</code></td>
</tr>
<tr>
<td>Assignment</td>
<td><code>$var = value</code></td>
</tr>
<tr>
<td>Condition</td>
<td><code>If condition</code><br><code>- Then step</code></td>
</tr>
<tr>
<td>Loop</td>
<td><code>While condition</code><br><code>- Loop step</code></td>
</tr>
<tr>
<td>Return</td>
<td><code>Return value</code></td>
</tr>
<tr>
<td>End program</td>
<td><code>End program</code></td>
</tr>
<tr>
<td>Call playbook</td>
<td><code>PlaybookName($arg)</code></td>
</tr>
<tr>
<td>Cross-agent call</td>
<td><code>OtherAgent.PlaybookName($arg)</code></td>
</tr>
<tr>
<td>Python playbook</td>
<td><code>@playbook</code><br><code>async def Name(): ...</code></td>
</tr>
<tr>
<td>Public playbook</td>
<td><code>public: true</code></td>
</tr>
<tr>
<td>ReAct playbook</td>
<td>No <code>### Steps</code> section</td>
</tr>
<tr>
<td>Raw playbook</td>
<td><code>execution_mode: raw</code></td>
</tr>
<tr>
<td>Meeting playbook</td>
<td><code>meeting: true</code></td>
</tr>
<tr>
<td>Save artifact</td>
<td><code>SaveArtifact("name", "desc", $content)</code></td>
</tr>
<tr>
<td>Load artifact</td>
<td><code>LoadArtifact("name")</code></td>
</tr>
<tr>
<td>Placeholder</td>
<td><code>{$variable}</code> or <code>{expression}</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="programming-principles-extremely-important">Programming Principles (EXTREMELY IMPORTANT!)<a class="headerlink" href="#programming-principles-extremely-important" title="Permanent link">&para;</a></h2>
<p><strong>Core Principles</strong> - When writing Playbooks programs:</p>
<ol>
<li><strong>Understand intent</strong>: What problem are you solving? What is the goal?</li>
<li><strong>Choose right types</strong>: Markdown for workflows, Python for logic, ReAct for research</li>
<li><strong>Natural first</strong>: Start with natural language, add explicitness only when clarity demands it</li>
<li><strong>Think decomposition</strong>: Break into logical playbooks with clear responsibilities</li>
<li><strong>⚠️ Extract to MCP</strong>: If you have 4+ Python playbooks, extract them to an MCP server using fastmcp and use an MCP agent as a proxy</li>
<li><strong>Handle errors</strong>: Consider edge cases and failure modes</li>
<li><strong>Write idiomatically</strong>: Follow patterns and conventions from examples - write code that reads like a human wrote it</li>
<li><strong>Document choices</strong>: Explain intent in descriptions and comments</li>
<li><strong>Iterate</strong>: Start simple, add complexity as needed</li>
</ol>
<p><strong>For AI Assistants</strong> - Additional guidance when helping users:</p>
<ul>
<li><strong>Think deeply</strong>: Plan in detail and review the plan before writing any code</li>
<li><strong>Teach while building</strong>: Explain architectural choices to help users learn</li>
<li><strong>Use triggers sparingly</strong>: Mainly for input validation, not normal control flow</li>
<li><strong>Optimal Playbooks</strong>: Write idiomatic code that uses Playbooks capabilities optimally to produce minimal, clean, readable programs</li>
<li><strong>Framework migrations</strong>: When converting from LangGraph, CrewAI, etc., produce the same behavior but leverage Playbooks' higher-level abstractions and natural language specifications</li>
</ul>
<p><strong>Remember</strong>: You're writing Software 3.0 - programs that execute on LLMs. Embrace natural language while maintaining precision. The compiler and runtime handle the complexity.</p>
<p>Happy building! 🚀</p>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../getting-started/migrating/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Migrating from Other Agent Frameworks">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Migrating from Other Agent Frameworks
              </div>
            </div>
          </a>
        
        
          
          <a href="artifacts/" class="md-footer__link md-footer__link--next" aria-label="Next: Artifacts">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Artifacts
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Playbooks AI 2025
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.top", "navigation.tracking", "toc.follow"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>